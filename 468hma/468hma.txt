
SQL*Plus: Release 11.2.0.1.0 Production on Sun Nov 28 08:09:02 2010

Copyright (c) 1982, 2009, Oracle.  All rights reserved.


Connected to:
Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options

08:09:02 SQL> ALTER SESSION SET NLS_DATE_FORMAT = 'YYYY-MM-DD hh24:mi:ss';

Session altered.

Elapsed: 00:00:00.00
08:09:02 SQL> 08:09:02 SQL> --
08:09:02 SQL> -- 468hma.sql
08:09:02 SQL> --
08:09:02 SQL> 
08:09:02 SQL> -- I use this script to help me answer the question,
08:09:02 SQL> -- Is moving average slope predictive?
08:09:02 SQL> 
08:09:02 SQL> CREATE OR REPLACE VIEW v468hma10 AS
08:09:02   2  SELECT
08:09:02   3  pair
08:09:02   4  -- ydate is granular down to the hour:
08:09:02   5  ,ydate
08:09:02   6  ,clse
08:09:02   7  -- Use analytic function to get moving average1:
08:09:02   8  ,AVG(clse)OVER(PARTITION BY pair ORDER BY ydate ROWS BETWEEN 5 PRECEDING AND 1 PRECEDING)ma1_4
08:09:02   9  ,AVG(clse)OVER(PARTITION BY pair ORDER BY ydate ROWS BETWEEN 7 PRECEDING AND 1 PRECEDING)ma1_6
08:09:02  10  ,AVG(clse)OVER(PARTITION BY pair ORDER BY ydate ROWS BETWEEN 9 PRECEDING AND 1 PRECEDING)ma1_8
08:09:02  11  ,AVG(clse)OVER(PARTITION BY pair ORDER BY ydate ROWS BETWEEN 10 PRECEDING AND 1 PRECEDING)ma1_9
08:09:02  12  ,AVG(clse)OVER(PARTITION BY pair ORDER BY ydate ROWS BETWEEN 13 PRECEDING AND 1 PRECEDING)ma1_12
08:09:02  13  ,AVG(clse)OVER(PARTITION BY pair ORDER BY ydate ROWS BETWEEN 19 PRECEDING AND 1 PRECEDING)ma1_18
08:09:02  14  -- Use analytic function to get moving average2:
08:09:02  15  ,AVG(clse)OVER(PARTITION BY pair ORDER BY ydate ROWS BETWEEN 4 PRECEDING AND CURRENT ROW)ma2_4
08:09:02  16  ,AVG(clse)OVER(PARTITION BY pair ORDER BY ydate ROWS BETWEEN 6 PRECEDING AND CURRENT ROW)ma2_6
08:09:02  17  ,AVG(clse)OVER(PARTITION BY pair ORDER BY ydate ROWS BETWEEN 8 PRECEDING AND CURRENT ROW)ma2_8
08:09:02  18  ,AVG(clse)OVER(PARTITION BY pair ORDER BY ydate ROWS BETWEEN 9 PRECEDING AND CURRENT ROW)ma2_9
08:09:02  19  ,AVG(clse)OVER(PARTITION BY pair ORDER BY ydate ROWS BETWEEN 12 PRECEDING AND CURRENT ROW)ma2_12
08:09:02  20  ,AVG(clse)OVER(PARTITION BY pair ORDER BY ydate ROWS BETWEEN 18 PRECEDING AND CURRENT ROW)ma2_18
08:09:02  21  -- Get future ydates
08:09:02  22  ,LEAD(ydate,4,NULL)OVER(PARTITION BY pair ORDER BY ydate) ydate4
08:09:02  23  ,LEAD(ydate,6,NULL)OVER(PARTITION BY pair ORDER BY ydate) ydate6
08:09:02  24  ,LEAD(ydate,8,NULL)OVER(PARTITION BY pair ORDER BY ydate) ydate8
08:09:02  25  -- Relative to current-row, get future closing prices:
08:09:02  26  ,LEAD(clse,4,NULL)OVER(PARTITION BY pair ORDER BY ydate) clse4
08:09:02  27  ,LEAD(clse,6,NULL)OVER(PARTITION BY pair ORDER BY ydate) clse6
08:09:02  28  ,LEAD(clse,8,NULL)OVER(PARTITION BY pair ORDER BY ydate) clse8
08:09:02  29  FROM h15c
08:09:02  30  WHERE ydate >'2009-01-01'
08:09:02  31  -- Prevent divide by zero:
08:09:02  32  AND clse > 0
08:09:02  33  ORDER BY ydate
08:09:02  34  /

View created.

Elapsed: 00:00:00.10
08:09:02 SQL> 
08:09:02 SQL> -- I should see 6 x 6:
08:09:02 SQL> SELECT pair,COUNT(*)FROM v468hma10 WHERE ydate6 IS NULL GROUP BY pair;

PAIR	  COUNT(*)
------- ----------
eur_usd 	 6
gbp_usd 	 6
usd_jpy 	 6
gbp_jpy 	 6
gbp_cad 	 6
gbp_chf 	 6
gbp_aud 	 6
eur_gbp 	 6
eur_jpy 	 6
eur_aud 	 6
eur_cad 	 6
usd_cad 	 6
eur_chf 	 6
aud_usd 	 6
usd_chf 	 6

15 rows selected.

Elapsed: 00:00:03.75
08:09:06 SQL> -- I should see 6 x 6:
08:09:06 SQL> SELECT pair,COUNT(*)FROM v468hma10 WHERE clse6 IS NULL GROUP BY pair;

PAIR	  COUNT(*)
------- ----------
eur_usd 	 6
gbp_usd 	 6
usd_jpy 	 6
gbp_jpy 	 6
gbp_cad 	 6
gbp_chf 	 6
gbp_aud 	 6
eur_gbp 	 6
eur_jpy 	 6
eur_aud 	 6
eur_cad 	 6
usd_cad 	 6
eur_chf 	 6
aud_usd 	 6
usd_chf 	 6

15 rows selected.

Elapsed: 00:00:03.72
08:09:10 SQL> 
08:09:10 SQL> -- I derive "normalized" slope of moving-averages:
08:09:10 SQL> CREATE OR REPLACE VIEW v468hma AS
08:09:10   2  SELECT
08:09:10   3  pair
08:09:10   4  ,ydate
08:09:10   5  ,(ma2_4 - ma1_4)/ma1_4 ma4_slope
08:09:10   6  ,(ma2_6 - ma1_6)/ma1_6 ma6_slope
08:09:10   7  ,(ma2_8 - ma1_8)/ma1_8 ma8_slope
08:09:10   8  ,(ma2_9 - ma1_9)/ma1_9 ma9_slope
08:09:10   9  ,(ma2_12 - ma1_12)/ma1_12 ma12_slope
08:09:10  10  ,(ma2_18 - ma1_18)/ma1_18 ma18_slope
08:09:10  11  ,ydate4
08:09:10  12  ,ydate6
08:09:10  13  ,ydate8
08:09:10  14  ,clse4
08:09:10  15  ,clse6
08:09:10  16  ,clse8
08:09:10  17  ,(clse4 - clse)/clse npg4
08:09:10  18  ,(clse6 - clse)/clse npg6
08:09:10  19  ,(clse8 - clse)/clse npg8
08:09:10  20  FROM v468hma10
08:09:10  21  ORDER BY ydate
08:09:10  22  /

View created.

Elapsed: 00:00:00.06
08:09:10 SQL> 
08:09:10 SQL> -- Is ma_slope correlated with npg4?
08:09:10 SQL> COLUMN pair FORMAT A7
08:09:10 SQL> 
08:09:10 SQL> SELECT
08:09:10   2  pair
08:09:10   3  ,COUNT(npg4)
08:09:10   4  ,ROUND(CORR(ma4_slope,npg4),2)corr4
08:09:10   5  ,ROUND(CORR(ma6_slope,npg4),2)corr6
08:09:10   6  ,ROUND(CORR(ma8_slope,npg4),2)corr8
08:09:10   7  ,ROUND(CORR(ma9_slope,npg4),2)corr9
08:09:10   8  ,ROUND(CORR(ma12_slope,npg4),2)corr12
08:09:10   9  ,ROUND(CORR(ma18_slope,npg4),2)corr18
08:09:10  10  FROM v468hma
08:09:10  11  GROUP BY pair
08:09:10  12  ORDER BY pair
08:09:10  13  /

PAIR	COUNT(NPG4)	 CORR4	    CORR6      CORR8	  CORR9     CORR12     CORR18
------- ----------- ---------- ---------- ---------- ---------- ---------- ----------
aud_usd       11987	     0	      .01	 .01	    .01       -.01	  .01
eur_aud       11987	     0	      .01	 .01	    .01        .01	  .03
eur_cad       11987	   .01	      .01	 .01	    .01        .01	  .03
eur_chf       11987	  -.01	     -.01	-.01	   -.01       -.02	    0
eur_gbp       11975	  -.01	     -.02	-.02	   -.02       -.02	  .01
eur_jpy       11987	  -.03	     -.03	-.02	   -.02       -.03	 -.01
eur_usd       11987	   .01	      .01	 .01	    .01       -.01	  .01
gbp_aud       11975	  -.02	     -.01	-.02	   -.02       -.01	  .01
gbp_cad       11975	  -.03	     -.03	-.04	   -.04       -.03	  .01
gbp_chf       11975	  -.03	     -.03	-.03	   -.03       -.02	    0
gbp_jpy       11975	  -.03	     -.03	-.02	   -.02       -.02	  .01
gbp_usd       11975	  -.01	     -.01	-.02	   -.02       -.03	    0
usd_cad       11987	  -.01	     -.01	-.01	   -.02       -.02	    0
usd_chf       11987	  -.02	     -.01	-.01	   -.02       -.02	 -.02
usd_jpy       11987	  -.04	     -.05	-.05	   -.04       -.03	 -.01

15 rows selected.

Elapsed: 00:00:15.17
08:09:25 SQL> 
08:09:25 SQL> -- Is ma_slope correlated with npg6?
08:09:25 SQL> SELECT
08:09:25   2  pair
08:09:25   3  ,COUNT(npg6)
08:09:25   4  ,ROUND(CORR(ma4_slope,npg6),2)corr4
08:09:25   5  ,ROUND(CORR(ma6_slope,npg6),2)corr6
08:09:25   6  ,ROUND(CORR(ma8_slope,npg6),2)corr8
08:09:25   7  ,ROUND(CORR(ma9_slope,npg6),2)corr9
08:09:25   8  ,ROUND(CORR(ma12_slope,npg6),2)corr12
08:09:25   9  ,ROUND(CORR(ma18_slope,npg6),2)corr18
08:09:25  10  FROM v468hma
08:09:25  11  GROUP BY pair
08:09:25  12  ORDER BY pair
08:09:25  13  /

PAIR	COUNT(NPG6)	 CORR4	    CORR6      CORR8	  CORR9     CORR12     CORR18
------- ----------- ---------- ---------- ---------- ---------- ---------- ----------
aud_usd       11985	   .01	      .01	 .01	      0 	 0	  .01
eur_aud       11985	     0	      .01	 .01	    .01        .02	  .04
eur_cad       11985	   .01	      .01	 .01	    .01        .01	  .05
eur_chf       11985	  -.01	     -.01	-.01	   -.01       -.02	  .01
eur_gbp       11973	  -.03	     -.04	-.03	   -.04       -.03	  .01
eur_jpy       11985	  -.03	     -.02	-.02	   -.02       -.03	 -.01
eur_usd       11985	   .02	      .02	 .01	      0       -.01	  .02
gbp_aud       11973	  -.02	     -.02	-.02	   -.02 	 0	  .02
gbp_cad       11973	  -.04	     -.04	-.05	   -.05       -.03	  .02
gbp_chf       11973	  -.04	     -.04	-.03	   -.03       -.02	    0
gbp_jpy       11973	  -.03	     -.02	-.02	   -.01       -.01	  .02
gbp_usd       11973	  -.01	     -.02	-.02	   -.03       -.02	  .01
usd_cad       11985	  -.01	     -.01	-.02	   -.02       -.02	  .01
usd_chf       11985	  -.01	     -.01	-.02	   -.02       -.02	 -.02
usd_jpy       11985	  -.05	     -.05	-.05	   -.05       -.03	    0

15 rows selected.

Elapsed: 00:00:14.85
08:09:40 SQL> 
08:09:40 SQL> -- Is ma_slope correlated with npg8?
08:09:40 SQL> SELECT
08:09:40   2  pair
08:09:40   3  ,COUNT(npg8)
08:09:40   4  ,ROUND(CORR(ma4_slope,npg8),2)corr4
08:09:40   5  ,ROUND(CORR(ma6_slope,npg8),2)corr6
08:09:40   6  ,ROUND(CORR(ma8_slope,npg8),2)corr8
08:09:40   7  ,ROUND(CORR(ma9_slope,npg8),2)corr9
08:09:40   8  ,ROUND(CORR(ma12_slope,npg8),2)corr12
08:09:40   9  ,ROUND(CORR(ma18_slope,npg8),2)corr18
08:09:40  10  FROM v468hma
08:09:40  11  GROUP BY pair
08:09:40  12  ORDER BY pair
08:09:40  13  /

PAIR	COUNT(NPG8)	 CORR4	    CORR6      CORR8	  CORR9     CORR12     CORR18
------- ----------- ---------- ---------- ---------- ---------- ---------- ----------
aud_usd       11983	   .01	      .01	   0	      0 	 0	    0
eur_aud       11983	     0	      .01	 .01	    .02        .03	  .04
eur_cad       11983	   .01	      .01	 .01	    .01        .02	  .06
eur_chf       11983	  -.01	     -.01	-.01	   -.01       -.01	  .01
eur_gbp       11971	  -.03	     -.04	-.03	   -.03       -.02	  .02
eur_jpy       11983	  -.02	     -.02	-.02	   -.02       -.03	 -.01
eur_usd       11983	   .02	      .01	   0	      0 	 0	  .01
gbp_aud       11971	  -.02	     -.02	-.01	   -.01        .01	  .02
gbp_cad       11971	  -.04	     -.05	-.05	   -.04       -.02	  .03
gbp_chf       11971	  -.03	     -.03	-.03	   -.02       -.01	  .01
gbp_jpy       11971	  -.02	     -.02	-.01	   -.01 	 0	  .03
gbp_usd       11971	  -.02	     -.02	-.03	   -.03       -.02	  .02
usd_cad       11983	  -.01	     -.02	-.02	   -.02       -.01	    0
usd_chf       11983	  -.01	     -.01	-.02	   -.02       -.02	 -.03
usd_jpy       11983	  -.05	     -.05	-.04	   -.04       -.02	  .01

15 rows selected.

Elapsed: 00:00:14.93
08:09:55 SQL> 
08:09:55 SQL> 
08:09:55 SQL> -- Look at ma4_slope and npg4,6,8:
08:09:55 SQL> SELECT
08:09:55   2  pair
08:09:55   3  ,nt74
08:09:55   4  ,AVG(ma4_slope)avg_ma4s
08:09:55   5  ,AVG(npg4)avg_npg4
08:09:55   6  ,AVG(npg6)avg_npg6
08:09:55   7  ,AVG(npg8)avg_npg8
08:09:55   8  ,COUNT(pair)
08:09:55   9  ,STDDEV(npg4)stddev_npg4
08:09:55  10  FROM
08:09:55  11  (
08:09:55  12  	SELECT
08:09:55  13  	pair
08:09:55  14  	,NTILE(7) OVER (PARTITION BY pair ORDER BY (ma4_slope))nt74
08:09:55  15  	,ma4_slope
08:09:55  16  	,npg4,npg6,npg8
08:09:55  17  	FROM v468hma
08:09:55  18  )
08:09:55  19  GROUP BY pair,nt74
08:09:55  20  ORDER BY pair,nt74
08:09:55  21  /

PAIR	      NT74   AVG_MA4S	AVG_NPG4   AVG_NPG6   AVG_NPG8 COUNT(PAIR) STDDEV_NPG4
------- ---------- ---------- ---------- ---------- ---------- ----------- -----------
aud_usd 	 1 -.00147227 .000125977 .000063484 .000128283	      1713  .004766486
aud_usd 	 2 -.00060054 .000049958 .000042929 -.00004455	      1713  .004167662
aud_usd 	 3 -.00023807 .000152575 .000172632 .000248592	      1713  .003815345
aud_usd 	 4 .000035301 5.7418E-06  .00002463 .000109039	      1713  .003856304
aud_usd 	 5 .000305708 .000029579 .000195521 .000298451	      1713  .003875328
aud_usd 	 6 .000653316 .000193833 .000279678 .000373881	      1713  .004305112
aud_usd 	 7 .001502673 .000226666 .000396733 .000456483	      1713  .004510929
eur_aud 	 1 -.00108455 -.00010235 -.00019751 -.00022236	      1713  .003322969
eur_aud 	 2 -.00048347 -.00010138 -.00004878 -.00003798	      1713  .002931757
eur_aud 	 3 -.00022742 -.00019926 -.00025567  -.0003658	      1713  .002897106
eur_aud 	 4 -.00003325  .00002932 -.00010059  -.0002251	      1713  .002847716
eur_aud 	 5 .000153265  -.0001179  -.0002192  -.0002721	      1713  .002686904
eur_aud 	 6 .000402209 -.00025807 -.00031629 -.00034798	      1713  .002836256
eur_aud 	 7 .001061894 -.00006626 -.00008498 -.00016364	      1713  .003707331
eur_cad 	 1 -.00105993 1.6429E-06 .000015011 -9.604E-06	      1713  .003454341
eur_cad 	 2 -.00040532  -.0001072 -.00015609 -.00017884	      1713  .002721665
eur_cad 	 3 -.00018223  -.0000174 -.00014466 -.00017314	      1713  .002654787
eur_cad 	 4  -.0000199 -.00011927 -.00015429 -.00019756	      1713  .002580456
eur_cad 	 5 .000143294 -.00020609 -.00026714 -.00028958	      1713  .002751835
eur_cad 	 6  .00036646  -.0000969  -.0001035 -.00013432	      1713  .002977679
eur_cad 	 7  .00102204 .000035332 .000046637 -.00003627	      1713  .003394586
eur_chf 	 1 -.00066348  .00004402  .00003287 .000087547	      1713  .002505142
eur_chf 	 2 -.00022003 -.00003483 -.00002802 -.00003967	      1713  .001948506
eur_chf 	 3 -.00008601 .000057945 .000057938  .00004021	      1713  .001545062
eur_chf 	 4 -9.504E-06 .000042787 .000061996 .000067692	      1713  .001427214
eur_chf 	 5 .000064372 -.00006913 -.00007688 -.00014473	      1713  .001443256
eur_chf 	 6 .000185404  -.0001297 -.00018333 -.00027577	      1713  .002036436
eur_chf 	 7 .000661689 -.00017211 -.00025673 -.00025944	      1713  .002574222
eur_gbp 	 1 -.00101534 -.00007039 .000017532 1.8021E-06	      1712   .00325185
eur_gbp 	 2 -.00039138 .000074663 .000138917 .000127076	      1712  .002764974
eur_gbp 	 3 -.00016589 -.00001633 -4.256E-06 -5.915E-06	      1711  .002552521
eur_gbp 	 4 -.00001263 -.00004589 -.00008952  -.0000771	      1711   .00264264
eur_gbp 	 5 .000142028 .000074219 8.5055E-06 -.00002695	      1711  .002691609
eur_gbp 	 6 .000364659 -9.272E-06 -.00005525 -.00007927	      1711  .002836154
eur_gbp 	 7 .001013055 -.00025134 -.00038604 -.00043855	      1711   .00323466
eur_jpy 	 1 -.00150637 .000115026 .000238738 .000127399	      1713  .005259971
eur_jpy 	 2 -.00060614 .000015555 -.00016358 -.00009158	      1713  .004191915
eur_jpy 	 3 -.00024879 -.00016213 -.00025804  -.0003355	      1713  .003912434
eur_jpy 	 4 .000010715 -.00017805 -.00023268 -.00022893	      1713  .003707654
eur_jpy 	 5 .000261088 -6.182E-06 .000047151 .000059713	      1713  .003821691
eur_jpy 	 6 .000596676 -.00010169 -.00013563 -.00031914	      1713  .003781998
eur_jpy 	 7 .001420858 .000076833 .000141837  .00030077	      1713  .004665439
eur_usd 	 1 -.00108928 -.00008349 -.00014485 -.00021469	      1713  .003258628
eur_usd 	 2  -.0004393 -.00005651 -.00004307 -.00009916	      1713  .003033803
eur_usd 	 3 -.00018994 -.00005493 -.00007927 .000014927	      1713   .00285549
eur_usd 	 4 -3.254E-06 .000063185 .000073879 .000066501	      1713  .002851881
eur_usd 	 5  .00017951 -.00003096 -.00007526 -.00010809	      1713   .00290018
eur_usd 	 6 .000425705 .000075916 .000128998 .000187927	      1713  .003149539
eur_usd 	 7 .001087465 -5.285E-06 1.8034E-06 -.00003209	      1713  .003547139
gbp_aud 	 1 -.00121868 -3.405E-06 -.00007848 -.00001406	      1712  .003757585
gbp_aud 	 2 -.00054891 .000090172 .000025776 -.00002143	      1712   .00332842
gbp_aud 	 3 -.00025485 -.00011352 -.00011037 -.00016761	      1711  .003187962
gbp_aud 	 4 -.00003015 -.00009834 -.00009392  -.0002535	      1711  .003203207
gbp_aud 	 5 .000200423 -.00004058 -.00008119 -.00005507	      1711  .003279593
gbp_aud 	 6 .000492882 -.00017578 -.00025438 -.00027973	      1711  .003271151
gbp_aud 	 7 .001217647 -.00019326 -.00020571 -.00027343	      1711  .004023075
gbp_cad 	 1 -.00117118 .000223293 .000290628 .000359912	      1712   .00362074
gbp_cad 	 2 -.00046148 .000041897 .000093784 .000099756	      1712  .003160896
gbp_cad 	 3 -.00020566 -.00010219 -.00013421  -.0001351	      1711  .002913885
gbp_cad 	 4 -.00001872 -.00001564 -.00005823 -.00013344	      1711  .003024624
gbp_cad 	 5 .000173968 -.00008555 -.00002621 -.00001829	      1711  .003240057
gbp_cad 	 6 .000439379 -.00019836  -.0002583 -.00028395	      1711  .003374642
gbp_cad 	 7 .001177755 -.00009298 -.00024741 -.00033968	      1711  .003816188
gbp_chf 	 1 -.00114611 .000249806 .000353627 .000341177	      1712  .003876925
gbp_chf 	 2 -.00041839 .000142431 .000197592 .000235458	      1712  .003003312
gbp_chf 	 3  -.0001725 -.00003711 -.00002069 -.00005529	      1711  .002951737
gbp_chf 	 4 -6.504E-07 -.00007441 -.00009692 -.00007165	      1711  .002719873
gbp_chf 	 5 .000167531 .000024055 -.00002662 -.00008398	      1711  .003047379
gbp_chf 	 6 .000417569 -.00020879 -.00018078 -.00010474	      1711  .003203231
gbp_chf 	 7 .001155685 -.00006041 -.00016906 -.00018274	      1711    .0039484
gbp_jpy 	 1 -.00163611 .000357704 .000364678 .000305444	      1712  .005933495
gbp_jpy 	 2 -.00064461 .000086702 .000065004 -.00002984	      1712  .004747244
gbp_jpy 	 3 -.00026389 -.00033207  -.0003795 -.00041455	      1711  .004188504
gbp_jpy 	 4 5.5419E-06 -.00028362 -.00032528 -.00026763	      1711  .004201063
gbp_jpy 	 5 .000263638 -.00016031 -.00012551  -.0000657	      1711  .003952264
gbp_jpy 	 6 .000645108 .000174479 .000172812 .000112482	      1711  .004294538
gbp_jpy 	 7 .001628799 .000202685 .000298182 .000453221	      1711  .005110778
gbp_usd 	 1  -.0011769 .000051517 .000038241 .000076956	      1712  .003923277
gbp_usd 	 2   -.000461 -.00005997 -.00005619  -.0001085	      1712  .003311735
gbp_usd 	 3  -.0001917 .000087439 .000103657 .000142449	      1711  .003238485
gbp_usd 	 4 1.7996E-06 -.00002487 -2.233E-06 .000050395	      1711  .003031541
gbp_usd 	 5   .0002001 .000043942 .000074316 .000127574	      1711  .002980427
gbp_usd 	 6 .000467913 .000102227 .000101367  .00017817	      1711   .00333236
gbp_usd 	 7  .00120038 -.00001301 .000025069  -.0000853	      1711  .003720294
usd_cad 	 1 -.00117997 .000032383 -.00002714 .000079716	      1713  .003583611
usd_cad 	 2 -.00048779 -9.974E-06 -.00007628 -.00013383	      1713  .003340999
usd_cad 	 3 -.00021722 -.00007617 -.00014081 -.00019428	      1713  .002903903
usd_cad 	 4 -.00001963 -.00018395 -.00018633 -.00034086	      1713  .002978942
usd_cad 	 5 .000177984 -.00007141  -.0000667 -.00003283	      1713  .003028765
usd_cad 	 6 .000454329 -.00007143   -.000109 -.00016478	      1713  .003412507
usd_cad 	 7 .001168574 4.8182E-06 .000042033 .000034597	      1713  .003982865
usd_chf 	 1 -.00107621 .000014456 -.00001414 -.00001113	      1713  .003554094
usd_chf 	 2 -.00041622 .000085654 .000083702 .000062902	      1713  .003180806
usd_chf 	 3 -.00018474 .000028976 .000030212  .00002314	      1713  .002935917
usd_chf 	 4 -6.854E-06 -.00003339 .000023204 .000031857	      1713  .002858147
usd_chf 	 5 .000170621 -.00003936 -.00007558  -.0001869	      1713  .002793534
usd_chf 	 6 .000400117 -.00002599 -.00003169 .000026322	      1713  .002868818
usd_chf 	 7  .00107836  -.0001454 -.00018938 -.00017823	      1713  .003508096
usd_jpy 	 1  -.0010748 .000350349 .000460981 .000461777	      1713  .003778906
usd_jpy 	 2 -.00043111 -.00008395 -.00018691  -.0002611	      1713  .003006412
usd_jpy 	 3 -.00018701 -.00010364 -.00010736 -.00006177	      1713   .00293267
usd_jpy 	 4 -6.943E-06 -.00010101 -.00009251 -.00005073	      1713  .003018954
usd_jpy 	 5 .000171329 -.00011718   -.000171 -.00019011	      1713  .003020601
usd_jpy 	 6 .000410393 -.00011293 -.00011811 -.00016045	      1713  .002998417
usd_jpy 	 7 .001075998 .000025549 -1.172E-07 -.00002687	      1713  .003182601

105 rows selected.

Elapsed: 00:00:04.94
08:10:00 SQL> 
08:10:00 SQL> 
08:10:00 SQL> -- Look at ma8_slope and npg4,6,8:
08:10:00 SQL> SELECT
08:10:00   2  pair
08:10:00   3  ,nt74
08:10:00   4  ,AVG(ma8_slope)avg_ma8s
08:10:00   5  ,AVG(npg4)avg_npg4
08:10:00   6  ,AVG(npg6)avg_npg6
08:10:00   7  ,AVG(npg8)avg_npg8
08:10:00   8  ,COUNT(pair)
08:10:00   9  ,STDDEV(npg4)stddev_npg4
08:10:00  10  FROM
08:10:00  11  (
08:10:00  12  	SELECT
08:10:00  13  	pair
08:10:00  14  	,NTILE(7) OVER (PARTITION BY pair ORDER BY (ma8_slope))nt74
08:10:00  15  	,ma8_slope
08:10:00  16  	,npg4,npg6,npg8
08:10:00  17  	FROM v468hma
08:10:00  18  )
08:10:00  19  GROUP BY pair,nt74
08:10:00  20  ORDER BY pair,nt74
08:10:00  21  /

PAIR	      NT74   AVG_MA8S	AVG_NPG4   AVG_NPG6   AVG_NPG8 COUNT(PAIR) STDDEV_NPG4
------- ---------- ---------- ---------- ---------- ---------- ----------- -----------
aud_usd 	 1 -.00109341 -.00004728 .000043516 .000135444	      1713  .004796381
aud_usd 	 2 -.00046192 .000102151 .000140164  .00018632	      1713  .004421869
aud_usd 	 3 -.00017856 .000165871 .000278119 .000427609	      1713  .004029384
aud_usd 	 4 .000030556 -7.542E-06 .000032708 8.3927E-06	      1713   .00406432
aud_usd 	 5 .000237653 .000192663 .000181912 .000224095	      1713  .003704223
aud_usd 	 6 .000519327 .000180414 .000174929 .000190815	      1713  .004054471
aud_usd 	 7 .001131097 .000198293 .000324509 .000397874	      1713  .004234291
eur_aud 	 1 -.00082066 -.00019459 -.00020359 -.00025428	      1713   .00320872
eur_aud 	 2 -.00037265 .000044457 .000012761 -.00003508	      1713  .002929269
eur_aud 	 3 -.00018241  -.0001596 -.00021778 -.00031001	      1713  .002781141
eur_aud 	 4 -.00003371 -.00015689 -.00026446 -.00044679	      1713  .002786409
eur_aud 	 5 .000112145  -.0001681 -.00023417 -.00030167	      1713  .002749414
eur_aud 	 6 .000297985 -.00005432 -.00021206 -.00019633	      1713  .003053949
eur_aud 	 7 .000786775 -.00012683 -.00010365 -.00009056	      1713  .003727561
eur_cad 	 1 -.00079226 -.00005226 -.00003543 -.00005767	      1713  .003134662
eur_cad 	 2 -.00032637  -.0001202  -.0001403   -.000147	      1713  .002994022
eur_cad 	 3 -.00015436 -.00004727 -.00020177 -.00020152	      1713  .002600989
eur_cad 	 4 -.00002547 -.00006504  -.0000683 -.00012267	      1713   .00291105
eur_cad 	 5 .000107702 -.00018677 -.00021917 -.00028545	      1713  .002755352
eur_cad 	 6 .000284672 -.00001228 -.00005621 -.00012842	      1713   .00294349
eur_cad 	 7 .000769496 -.00002599  -.0000426  -.0000765	      1713  .003277521
eur_chf 	 1 -.00049851 .000077968 .000083827 .000108956	      1713  .002570204
eur_chf 	 2 -.00017285 .000042367   .0000976 .000081281	      1713  .001924646
eur_chf 	 3 -.00006949 .000028044 .000041112 .000024307	      1713   .00152684
eur_chf 	 4 -9.194E-06 -.00001524 -.00003819 -.00001095	      1713  .001363636
eur_chf 	 5 .000045903  -.0000975  -.0001437 -.00015741	      1713   .00174295
eur_chf 	 6 .000139742 -.00018271 -.00026117 -.00030885	      1713  .001760806
eur_chf 	 7 .000496251 -.00011402 -.00017139 -.00026101	      1713  .002590285
eur_gbp 	 1 -.00074908  .00010498 .000191932 .000250227	      1712  .003068099
eur_gbp 	 2 -.00031497 -.00006259 -.00007671  -.0000754	      1712  .002666079
eur_gbp 	 3 -.00014242 -.00005909 .000012383 -5.221E-06	      1711  .002730029
eur_gbp 	 4 -.00001347 -.00001999 -.00004047 -.00006513	      1711  .002733822
eur_gbp 	 5 .000117691 .000065585 -6.697E-06 -.00010333	      1711  .002715693
eur_gbp 	 6 .000292425 -.00007941 -.00016064   -.000186	      1711  .002962364
eur_gbp 	 7 .000742864  -.0001941  -.0002901 -.00031404	      1711  .003144796
eur_jpy 	 1 -.00112021 .000147913 .000218233 .000312612	      1713  .005396404
eur_jpy 	 2 -.00047577 -.00031447 -.00042403 -.00054259	      1713  .004333576
eur_jpy 	 3  -.0001983 -.00012645 -.00030688 -.00033555	      1713  .003858287
eur_jpy 	 4 .000010327  .00008069 .000125876 .000161969	      1713   .00373111
eur_jpy 	 5 .000206752 -.00001954  .00006463 2.2386E-06	      1713  .003807664
eur_jpy 	 6 .000456741 -.00006859 -.00012795 -.00019651	      1713  .003789661
eur_jpy 	 7 .001046634 .000059989 .000088292 .000110888	      1713  .004397232
eur_usd 	 1 -.00081951 -.00012582 -.00013496 -.00022349	      1713  .003095966
eur_usd 	 2 -.00035443 2.6656E-06 2.3273E-06 .000079073	      1713  .003086558
eur_usd 	 3 -.00015271 -4.231E-06 .000024623 .000034646	      1713  .002990805
eur_usd 	 4 -4.284E-06  -.0000133 -.00003245 .000077969	      1713  .002959536
eur_usd 	 5 .000138257 5.8924E-06 .000012845 -6.705E-06	      1713   .00287363
eur_usd 	 6 .000339193 -.00004967 -.00005878 -.00004176	      1713  .003201067
eur_usd 	 7  .00082338 .000092332 .000048475 -.00010455	      1713  .003420414
gbp_aud 	 1 -.00090474 -.00008032 -.00012979 -.00018791	      1712  .003634175
gbp_aud 	 2 -.00042014 .000056533 .000157735  .00016314	      1712  .003247528
gbp_aud 	 3 -.00020065 .000052819 -.00002068 -.00011094	      1711  .003264545
gbp_aud 	 4 -.00002552 -.00011635 -.00016109 -.00025109	      1711  .003230538
gbp_aud 	 5 .000145811 -.00018042 -.00027982 -.00032328	      1711  .003267132
gbp_aud 	 6 .000367937 -.00008735 -.00020369 -.00019551	      1711  .003491195
gbp_aud 	 7 .000894377  -.0001793  -.0001608  -.0001594	      1711  .003944376
gbp_cad 	 1 -.00086397 .000085647 .000187849  .00013951	      1712  .003510758
gbp_cad 	 2 -.00036539  .00015849 .000205458 .000332833	      1712  .003173034
gbp_cad 	 3 -.00016341 .000051997 .000078709 .000065091	      1711  .003168669
gbp_cad 	 4 -.00001795 -.00008045 -.00014161 -.00013552	      1711  .003072561
gbp_cad 	 5 .000132184 -.00011575  -.0000545 -.00009499	      1711  .003377752
gbp_cad 	 6 .000340718 -.00006247 -.00019583  -.0002902	      1711  .003323066
gbp_cad 	 7 .000870825 -.00026659 -.00041983 -.00046787	      1711  .003585606
gbp_chf 	 1 -.00083319 .000183935 .000267581 .000194299	      1712  .003790314
gbp_chf 	 2 -.00033415 .000186765 .000245954 .000272204	      1712   .00319729
gbp_chf 	 3 -.00014381  -.0000752 -.00008072 -.00006188	      1711  .003045886
gbp_chf 	 4 -7.050E-08 -.00008833 -.00007195 -.00001905	      1711  .002852487
gbp_chf 	 5 .000139003 .000023198 .000026164 .000040607	      1711  .003011298
gbp_chf 	 6 .000327923 -.00006454 -.00012441 -.00009434	      1711  .003257237
gbp_chf 	 7  .00084641  -.0001298 -.00020498  -.0002533	      1711  .003696226
gbp_jpy 	 1 -.00121472  .00014397 .000155673 .000269219	      1712  .006320963
gbp_jpy 	 2 -.00050967 -.00014845 -.00028222 -.00037723	      1712  .004643578
gbp_jpy 	 3 -.00020711 -.00013117 -.00015664 -.00023465	      1711    .0042888
gbp_jpy 	 4 5.5366E-06 .000078844 .000125941  .00001679	      1711  .003907489
gbp_jpy 	 5 .000215175 -.00006553 -.00005307 -.00010723	      1711  .004011158
gbp_jpy 	 6 .000507231 -.00008517 -.00007352 .000081883	      1711   .00412988
gbp_jpy 	 7 .001199938 .000253718 .000354778 .000444775	      1711  .005007593
gbp_usd 	 1 -.00087969 -2.546E-06 .000124039 .000153322	      1712  .004071243
gbp_usd 	 2 -.00036591 .000063202 2.8374E-06 .000051186	      1712  .003379755
gbp_usd 	 3 -.00015152 .000065761 .000052478   .0000856	      1711  .003102861
gbp_usd 	 4 3.7563E-06 -3.419E-06  .00002451 2.7862E-06	      1711   .00306318
gbp_usd 	 5 .000162162 .000099055 .000085441 .000187021	      1711  .003223967
gbp_usd 	 6 .000380816 .000051623 .000118296 .000075609	      1711  .003301489
gbp_usd 	 7 .000889971 -.00008653 -.00012329 -.00017362	      1711  .003401801
usd_cad 	 1 -.00088615 .000181702 .000207516 .000259034	      1713  .003164095
usd_cad 	 2 -.00038267 .000022062 -.00001069 -3.102E-06	      1713   .00315801
usd_cad 	 3 -.00017891 -.00012596 -.00012051 -.00025288	      1713  .003189908
usd_cad 	 4 -.00002214 -.00023748 -.00028081 -.00028766	      1713  .003021598
usd_cad 	 5 .000137911 -.00022366 -.00035758  -.0003511	      1713  .003372516
usd_cad 	 6  .00035434 -.00001429 .000043548 .000030583	      1713  .003669027
usd_cad 	 7 .000872797 .000021534  -.0000461 -.00014762	      1713   .00370961
usd_chf 	 1 -.00080329 -.00005109 -.00003119 2.5856E-06	      1713  .003334688
usd_chf 	 2 -.00032932 .000027678 .000045026 .000088022	      1713  .003022246
usd_chf 	 3 -.00014657 .000072811 .000076917 8.2819E-06	      1713  .003020829
usd_chf 	 4 -6.478E-06 .000136368 .000140566 .000116584	      1713  .003114443
usd_chf 	 5 .000131098 -.00005873 -.00004366 .000021678	      1713  .002955076
usd_chf 	 6 .000315724 -.00009963  -.0000801 -.00019545	      1713  .003136182
usd_chf 	 7 .000802945 -.00014233 -.00028098 -.00027335	      1713  .003194622
usd_jpy 	 1 -.00078471 .000351248  .00041289 .000397778	      1713  .003761209
usd_jpy 	 2 -.00034645 -.00008215 -.00012521  -.0000914	      1713  .003169145
usd_jpy 	 3 -.00015598 -.00024471 -.00034467 -.00048788	      1713  .003032608
usd_jpy 	 4 -9.377E-06 -.00016928 -.00015254 -.00013123	      1713  .003002972
usd_jpy 	 5 .000133898 -.00003763 -.00004117 .000010463	      1713  .003104421
usd_jpy 	 6 .000322703 .000045371 .000083802 .000065439	      1713  .002833043
usd_jpy 	 7 .000796715 -5.312E-06 -.00004757 -.00005178	      1713  .003026825

105 rows selected.

Elapsed: 00:00:04.98
08:10:04 SQL> 
08:10:04 SQL> 
08:10:04 SQL> -- Instead of using NTILE() to categorize ma-slope,
08:10:04 SQL> -- I use 3 std-deviations ma-slope.
08:10:04 SQL> 
08:10:04 SQL> 
08:10:04 SQL> CREATE OR REPLACE VIEW v468hma12 AS
08:10:04   2  SELECT
08:10:04   3  pair
08:10:04   4  ,ydate
08:10:04   5  ,(ma2_4 - ma1_4)/ma1_4 ma4_slope
08:10:04   6  ,(ma2_6 - ma1_6)/ma1_6 ma6_slope
08:10:04   7  ,(ma2_8 - ma1_8)/ma1_8 ma8_slope
08:10:04   8  ,(ma2_9 - ma1_9)/ma1_9 ma9_slope
08:10:04   9  ,(ma2_12 - ma1_12)/ma1_12 ma12_slope
08:10:04  10  ,(ma2_18 - ma1_18)/ma1_18 ma18_slope
08:10:04  11  ,ydate4
08:10:04  12  ,ydate6
08:10:04  13  ,ydate8
08:10:04  14  ,clse4
08:10:04  15  ,clse6
08:10:04  16  ,clse8
08:10:04  17  ,(clse4 - clse)/clse npg4
08:10:04  18  ,(clse6 - clse)/clse npg6
08:10:04  19  ,(clse8 - clse)/clse npg8
08:10:04  20  FROM v468hma10
08:10:04  21  ORDER BY ydate
08:10:04  22  /

View created.

Elapsed: 00:00:00.05
08:10:05 SQL> 
08:10:05 SQL> CREATE OR REPLACE VIEW v468hma14 AS
08:10:05   2  SELECT
08:10:05   3  pair
08:10:05   4  ,ydate
08:10:05   5  ,ma4_slope
08:10:05   6  ,ma6_slope
08:10:05   7  ,ma8_slope
08:10:05   8  ,ma9_slope
08:10:05   9  ,ma12_slope
08:10:05  10  ,ma18_slope
08:10:05  11  ,ydate4
08:10:05  12  ,ydate6
08:10:05  13  ,ydate8
08:10:05  14  ,clse4
08:10:05  15  ,clse6
08:10:05  16  ,clse8
08:10:05  17  ,npg4
08:10:05  18  ,npg6
08:10:05  19  ,npg8
08:10:05  20  ,STDDEV(ma4_slope)OVER(PARTITION BY pair)stddev4
08:10:05  21  ,STDDEV(ma6_slope)OVER(PARTITION BY pair)stddev6
08:10:05  22  ,STDDEV(ma8_slope)OVER(PARTITION BY pair)stddev8
08:10:05  23  ,SIGN(ma4_slope)sgn4
08:10:05  24  ,SIGN(ma6_slope)sgn6
08:10:05  25  ,SIGN(ma8_slope)sgn8
08:10:05  26  FROM v468hma12
08:10:05  27  ORDER BY ydate
08:10:05  28  /

View created.

Elapsed: 00:00:00.04
08:10:05 SQL> 
08:10:05 SQL> --rpt
08:10:05 SQL> -- I should see min as the same as max:
08:10:05 SQL> SELECT
08:10:05   2  pair
08:10:05   3  ,MIN(stddev4),MAX(stddev4)
08:10:05   4  ,MIN(stddev6),MAX(stddev6)
08:10:05   5  ,MIN(stddev8),MAX(stddev8)
08:10:05   6  FROM v468hma14
08:10:05   7  GROUP BY pair
08:10:05   8  /

PAIR	MIN(STDDEV4) MAX(STDDEV4) MIN(STDDEV6) MAX(STDDEV6) MIN(STDDEV8) MAX(STDDEV8)
------- ------------ ------------ ------------ ------------ ------------ ------------
eur_usd   .000689689   .000689689   .000585283	 .000585283    .00051744    .00051744
gbp_usd   .000752235   .000752235   .000634601	 .000634601   .000558516   .000558516
usd_jpy   .000699838   .000699838   .000586401	 .000586401   .000511561   .000511561
gbp_cad   .000741387   .000741387   .000623523	 .000623523   .000545553   .000545553
gbp_jpy   .001039294   .001039294   .000873389	 .000873389    .00076514    .00076514
gbp_chf   .000735094   .000735094   .000616632	 .000616632   .000539184   .000539184
gbp_aud   .000768158   .000768158   .000646002	 .000646002   .000567163   .000567163
eur_gbp   .000644077   .000644077   .000543086	 .000543086   .000475556   .000475556
eur_jpy   .000937539   .000937539   .000790195	 .000790195   .000692014   .000692014
eur_aud   .000683123   .000683123   .000576698	 .000576698   .000509211   .000509211
eur_cad   .000661249   .000661249   .000560793	 .000560793   .000496657   .000496657
eur_chf   .000440217   .000440217   .000371589	 .000371589   .000326852   .000326852
aud_usd   .000935716   .000935716   .000791262	 .000791262   .000697419   .000697419
usd_cad   .000741566   .000741566   .000625629	 .000625629   .000551147   .000551147
usd_chf   .000693399   .000693399   .000582897	 .000582897   .000512973   .000512973

15 rows selected.

Elapsed: 00:00:07.44
08:10:12 SQL> 
08:10:12 SQL> -- Look at steep slopes:
08:10:12 SQL> CREATE OR REPLACE VIEW v468hma16 AS
08:10:12   2  SELECT
08:10:12   3  pair
08:10:12   4  ,ydate
08:10:12   5  ,ma4_slope
08:10:12   6  ,ma6_slope
08:10:12   7  ,ma8_slope
08:10:12   8  ,ma9_slope
08:10:12   9  ,ma12_slope
08:10:12  10  ,ma18_slope
08:10:12  11  ,ydate4
08:10:12  12  ,ydate6
08:10:12  13  ,ydate8
08:10:12  14  ,clse4
08:10:12  15  ,clse6
08:10:12  16  ,clse8
08:10:12  17  ,npg4
08:10:12  18  ,npg6
08:10:12  19  ,npg8
08:10:12  20  ,sgn4
08:10:12  21  ,sgn6
08:10:12  22  ,sgn8
08:10:12  23  ,STDDEV(ma4_slope)OVER(PARTITION BY pair)stddev4
08:10:12  24  ,STDDEV(ma6_slope)OVER(PARTITION BY pair)stddev6
08:10:12  25  ,STDDEV(ma8_slope)OVER(PARTITION BY pair)stddev8
08:10:12  26  FROM v468hma14
08:10:12  27  ORDER BY ydate
08:10:12  28  /

View created.

Elapsed: 00:00:00.04
08:10:12 SQL> 
08:10:12 SQL> 
08:10:12 SQL> -- npg4, stddev4:
08:10:12 SQL> SELECT
08:10:12   2  sgn4
08:10:12   3  ,pair
08:10:12   4  ,AVG(npg4)
08:10:12   5  ,CORR(ma4_slope,npg4)crr4
08:10:12   6  ,COUNT(ydate)
08:10:12   7  ,MIN(ydate)
08:10:12   8  ,MAX(ydate)
08:10:12   9  FROM v468hma14
08:10:12  10  WHERE ABS(ma4_slope) > 2.1*stddev4
08:10:12  11  GROUP BY sgn4,pair
08:10:12  12  ORDER BY sgn4,pair
08:10:12  13  /

      SGN4 PAIR     AVG(NPG4)	    CRR4 COUNT(YDATE) MIN(YDATE)	  MAX(YDATE)
---------- ------- ---------- ---------- ------------ ------------------- -------------------
	-1 aud_usd   .0006627 -.16032523	  306 2009-01-02 02:00:00 2010-11-12 07:00:00
	-1 eur_aud -.00038224 .091998276	  286 2009-01-01 02:00:00 2010-11-23 14:00:00
	-1 eur_cad -.00040613 .058005529	  321 2009-01-01 02:00:00 2010-11-24 19:00:00
	-1 eur_chf -.00003107 .021337467	  267 2009-01-01 18:00:00 2010-11-24 09:00:00
	-1 eur_gbp .000053847 -.03556757	  277 2009-01-01 22:00:00 2010-11-23 15:00:00
	-1 eur_jpy  .00091481 -.26902861	  293 2009-01-01 19:00:00 2010-11-23 18:00:00
	-1 eur_usd  .00001808 .125509073	  282 2009-01-02 02:00:00 2010-11-23 17:00:00
	-1 gbp_aud   .0000784 -.09229889	  270 2009-01-01 02:00:00 2010-11-24 17:00:00
	-1 gbp_cad .000282398 -.10312948	  281 2009-01-01 02:00:00 2010-11-26 16:00:00
	-1 gbp_chf  -.0000693 -.11807488	  291 2009-01-02 08:00:00 2010-11-12 09:00:00
	-1 gbp_jpy .001480908 -.26676187	  287 2009-01-02 10:00:00 2010-11-23 18:00:00
	-1 gbp_usd .000257794 -.03199681	  292 2009-01-02 10:00:00 2010-11-23 17:00:00
	-1 usd_cad .000126908 -.04942074	  296 2009-01-01 02:00:00 2010-11-24 17:00:00
	-1 usd_chf -.00004084 -.03116553	  274 2009-01-01 21:00:00 2010-11-09 10:00:00
	-1 usd_jpy  .00109627 -.39181757	  232 2009-01-07 10:00:00 2010-09-24 09:00:00
	 1 aud_usd -1.306E-06 -.20653063	  277 2009-01-02 15:00:00 2010-11-02 07:00:00
	 1 eur_aud -.00047149 .009094597	  290 2009-01-02 09:00:00 2010-11-12 09:00:00
	 1 eur_cad .000429625 -.00937443	  306 2009-01-01 12:00:00 2010-11-16 15:00:00
	 1 eur_chf .000043305 .151364396	  290 2009-01-01 11:00:00 2010-11-22 01:00:00
	 1 eur_gbp -.00003913 .033540738	  302 2009-01-02 08:00:00 2010-11-12 10:00:00
	 1 eur_jpy .000094858 -.09266855	  235 2009-01-01 11:00:00 2010-11-12 14:00:00
	 1 eur_usd .000061756  -.1020282	  292 2009-01-04 23:00:00 2010-11-12 14:00:00
	 1 gbp_aud -.00029107  .06632453	  318 2009-01-01 18:00:00 2010-11-12 17:00:00
	 1 gbp_cad -2.027E-06 .045889001	  310 2009-01-01 23:00:00 2010-10-28 13:00:00
	 1 gbp_chf -.00036405 .113926168	  297 2009-01-02 20:00:00 2010-11-18 19:00:00
	 1 gbp_jpy -.00047335 -.08672847	  275 2009-01-02 20:00:00 2010-11-12 14:00:00
	 1 gbp_usd -.00058059 -.04858049	  297 2009-01-01 22:00:00 2010-11-12 14:00:00
	 1 usd_cad -.00016306 -.11999482	  291 2009-01-07 18:00:00 2010-11-26 13:00:00
	 1 usd_chf -.00045891 .041249208	  282 2009-01-02 04:00:00 2010-11-19 16:00:00
	 1 usd_jpy -.00008377 .159165276	  250 2009-01-02 18:00:00 2010-11-10 15:00:00

30 rows selected.

Elapsed: 00:00:07.28
08:10:19 SQL> 
08:10:19 SQL> -- npg4, stddev6:
08:10:19 SQL> SELECT
08:10:19   2  sgn6
08:10:19   3  ,pair
08:10:19   4  ,AVG(npg4)
08:10:19   5  ,CORR(ma6_slope,npg4)crr4
08:10:19   6  ,COUNT(ydate)
08:10:19   7  ,MIN(ydate)
08:10:19   8  ,MAX(ydate)
08:10:19   9  FROM v468hma14
08:10:19  10  WHERE ABS(ma6_slope) > 2.1*stddev6
08:10:19  11  GROUP BY sgn6,pair
08:10:19  12  ORDER BY sgn6,pair
08:10:19  13  /

      SGN6 PAIR     AVG(NPG4)	    CRR4 COUNT(YDATE) MIN(YDATE)	  MAX(YDATE)
---------- ------- ---------- ---------- ------------ ------------------- -------------------
	-1 aud_usd .000082194 -.03840748	  286 2009-01-02 04:00:00 2010-11-12 07:00:00
	-1 eur_aud -.00034527 -.02940401	  277 2009-01-01 02:00:00 2010-11-15 14:00:00
	-1 eur_cad -5.009E-06 .083865334	  315 2009-01-01 02:00:00 2010-11-24 21:00:00
	-1 eur_chf -.00012871 -.00652958	  273 2009-01-01 19:00:00 2010-11-24 08:00:00
	-1 eur_gbp .000048182 .013123483	  280 2009-01-01 22:00:00 2010-11-23 16:00:00
	-1 eur_jpy  .00180601 -.23351643	  277 2009-01-01 19:00:00 2010-11-23 19:00:00
	-1 eur_usd -.00023936 .001166083	  263 2009-01-02 04:00:00 2010-11-23 19:00:00
	-1 gbp_aud .000061737  -.0121048	  272 2009-01-01 02:00:00 2010-11-03 20:00:00
	-1 gbp_cad .000335756 -.06930252	  294 2009-01-01 02:00:00 2010-11-24 16:00:00
	-1 gbp_chf .000230309 -.07062111	  299 2009-01-02 08:00:00 2010-11-03 20:00:00
	-1 gbp_jpy .001559812 -.29805206	  291 2009-01-02 12:00:00 2010-11-23 18:00:00
	-1 gbp_usd .000139542 -.10859141	  300 2009-01-02 07:00:00 2010-11-23 19:00:00
	-1 usd_cad .000271914 -.10819372	  297 2009-01-01 02:00:00 2010-11-24 18:00:00
	-1 usd_chf -.00015591 -.05797014	  290 2009-01-02 11:00:00 2010-11-04 18:00:00
	-1 usd_jpy .001474104 -.38114654	  239 2009-01-06 21:00:00 2010-11-23 14:00:00
	 1 aud_usd -.00028332 -.16039084	  278 2009-01-01 02:00:00 2010-11-02 08:00:00
	 1 eur_aud  -.0000128 -.00554009	  294 2009-01-01 13:00:00 2010-11-12 11:00:00
	 1 eur_cad .000279354 -.01646766	  315 2009-01-01 12:00:00 2010-11-16 15:00:00
	 1 eur_chf .000078403  .13410052	  273 2009-01-01 12:00:00 2010-11-22 03:00:00
	 1 eur_gbp -.00018526 -.02844118	  285 2009-01-02 09:00:00 2010-11-12 10:00:00
	 1 eur_jpy -.00047217  -.0215685	  224 2009-01-01 12:00:00 2010-11-12 14:00:00
	 1 eur_usd .000110693 -.11256902	  287 2009-01-06 18:00:00 2010-11-12 14:00:00
	 1 gbp_aud -.00020274 .095843153	  279 2009-01-01 22:00:00 2010-11-12 18:00:00
	 1 gbp_cad  -.0002916 -.03028605	  304 2009-01-01 23:00:00 2010-10-26 12:00:00
	 1 gbp_chf -.00025885 .111593369	  305 2009-01-02 18:00:00 2010-11-18 21:00:00
	 1 gbp_jpy -.00050744 -.19334602	  273 2009-01-02 19:00:00 2010-11-12 16:00:00
	 1 gbp_usd -.00062267 -.19342301	  285 2009-01-05 18:00:00 2010-11-12 16:00:00
	 1 usd_cad .000077181 -.04607692	  288 2009-01-05 08:00:00 2010-11-26 11:00:00
	 1 usd_chf -.00050003  .10441734	  270 2009-01-02 04:00:00 2010-11-19 17:00:00
	 1 usd_jpy .000197399  -.0412384	  266 2009-01-02 19:00:00 2010-11-10 16:00:00

30 rows selected.

Elapsed: 00:00:07.27
08:10:27 SQL> 
08:10:27 SQL> -- npg4, stddev8:
08:10:27 SQL> SELECT
08:10:27   2  sgn8
08:10:27   3  ,pair
08:10:27   4  ,AVG(npg4)
08:10:27   5  ,CORR(ma8_slope,npg4)crr4
08:10:27   6  ,COUNT(ydate)
08:10:27   7  ,MIN(ydate)
08:10:27   8  ,MAX(ydate)
08:10:27   9  FROM v468hma14
08:10:27  10  WHERE ABS(ma8_slope) > 2.1*stddev8
08:10:27  11  GROUP BY sgn8,pair
08:10:27  12  ORDER BY sgn8,pair
08:10:27  13  /

      SGN8 PAIR     AVG(NPG4)	    CRR4 COUNT(YDATE) MIN(YDATE)	  MAX(YDATE)
---------- ------- ---------- ---------- ------------ ------------------- -------------------
	-1 aud_usd -.00015271 -.04982364	  270 2009-01-02 07:00:00 2010-11-09 22:00:00
	-1 eur_aud .000174595 -.07583058	  267 2009-01-01 02:00:00 2010-11-15 16:00:00
	-1 eur_cad -.00006171  .00870513	  311 2009-01-01 02:00:00 2010-11-24 20:00:00
	-1 eur_chf -.00016031 -.03520943	  287 2009-01-01 20:00:00 2010-11-23 18:00:00
	-1 eur_gbp .000235399 .131904313	  282 2009-01-01 22:00:00 2010-11-11 15:00:00
	-1 eur_jpy .001104016  -.3042367	  291 2009-01-02 02:00:00 2010-11-23 21:00:00
	-1 eur_usd -.00042533 .015604823	  257 2009-01-02 02:00:00 2010-11-23 21:00:00
	-1 gbp_aud .000396506 -.07906147	  284 2009-01-01 02:00:00 2010-11-02 11:00:00
	-1 gbp_cad .000224604 -.01685985	  302 2009-01-01 02:00:00 2010-11-24 21:00:00
	-1 gbp_chf .000437521 -.01195467	  288 2009-01-02 08:00:00 2010-11-03 21:00:00
	-1 gbp_jpy .001313614 -.33044542	  274 2009-01-08 07:00:00 2010-11-23 17:00:00
	-1 gbp_usd -.00003804 -.02264426	  288 2009-01-02 09:00:00 2010-11-23 21:00:00
	-1 usd_cad .000402107  -.1711605	  298 2009-01-01 02:00:00 2010-10-08 21:00:00
	-1 usd_chf  -.0003586 -.08150902	  262 2009-01-06 21:00:00 2010-11-04 19:00:00
	-1 usd_jpy .001616402 -.39312302	  227 2009-01-06 23:00:00 2010-10-25 07:00:00
	 1 aud_usd -.00022565 -.20882572	  276 2009-01-01 02:00:00 2010-10-07 07:00:00
	 1 eur_aud .000498261 -.00019438	  264 2009-01-07 10:00:00 2010-11-19 10:00:00
	 1 eur_cad .000281938 .056541829	  312 2009-01-06 21:00:00 2010-11-16 15:00:00
	 1 eur_chf .000082257 .171136138	  278 2009-01-01 12:00:00 2010-11-19 14:00:00
	 1 eur_gbp -.00013388 -.15599044	  267 2009-01-01 12:00:00 2010-11-12 10:00:00
	 1 eur_jpy -.00002249 .043131582	  236 2009-01-01 13:00:00 2010-11-12 16:00:00
	 1 eur_usd  -.0002149 .008650387	  287 2009-01-06 19:00:00 2010-11-12 14:00:00
	 1 gbp_aud -.00019476 .077877051	  276 2009-01-01 23:00:00 2010-11-12 19:00:00
	 1 gbp_cad -.00019659 -.07330852	  298 2009-01-01 23:00:00 2010-11-18 19:00:00
	 1 gbp_chf -.00040736 .228756741	  302 2009-01-02 05:00:00 2010-11-18 23:00:00
	 1 gbp_jpy .000198167  -.1766972	  291 2009-01-02 21:00:00 2010-11-12 16:00:00
	 1 gbp_usd -.00061886 -.15279845	  306 2009-01-05 17:00:00 2010-11-04 14:00:00
	 1 usd_cad .000137656 .008346077	  299 2009-01-05 08:00:00 2010-11-26 12:00:00
	 1 usd_chf -.00019385  .06359896	  264 2009-01-02 06:00:00 2010-11-23 19:00:00
	 1 usd_jpy .000239012 -.08377347	  263 2009-01-02 19:00:00 2010-11-10 17:00:00

30 rows selected.

Elapsed: 00:00:07.37
08:10:34 SQL> 
08:10:34 SQL> -- npg6, stddev6:
08:10:34 SQL> SELECT
08:10:34   2  sgn6
08:10:34   3  ,pair
08:10:34   4  ,AVG(npg6)
08:10:34   5  ,CORR(ma6_slope,npg6)crr6
08:10:34   6  ,COUNT(ydate)
08:10:34   7  ,MIN(ydate)
08:10:34   8  ,MAX(ydate)
08:10:34   9  FROM v468hma14
08:10:34  10  WHERE ABS(ma6_slope) > 2.1*stddev6
08:10:34  11  GROUP BY sgn6,pair
08:10:34  12  ORDER BY sgn6,pair
08:10:34  13  /

      SGN6 PAIR     AVG(NPG6)	    CRR6 COUNT(YDATE) MIN(YDATE)	  MAX(YDATE)
---------- ------- ---------- ---------- ------------ ------------------- -------------------
	-1 aud_usd   -.000145 -.02374085	  286 2009-01-02 04:00:00 2010-11-12 07:00:00
	-1 eur_aud -.00033594 -.08555228	  277 2009-01-01 02:00:00 2010-11-15 14:00:00
	-1 eur_cad .000053376 .040350667	  315 2009-01-01 02:00:00 2010-11-24 21:00:00
	-1 eur_chf -.00019244 .029344972	  273 2009-01-01 19:00:00 2010-11-24 08:00:00
	-1 eur_gbp .000128448 .070697114	  280 2009-01-01 22:00:00 2010-11-23 16:00:00
	-1 eur_jpy .001743238 -.30685224	  277 2009-01-01 19:00:00 2010-11-23 19:00:00
	-1 eur_usd -.00019106 .001355535	  263 2009-01-02 04:00:00 2010-11-23 19:00:00
	-1 gbp_aud .000461981 -.08845494	  272 2009-01-01 02:00:00 2010-11-03 20:00:00
	-1 gbp_cad  .00028163 -.02187445	  294 2009-01-01 02:00:00 2010-11-24 16:00:00
	-1 gbp_chf .000530197 -.04552379	  299 2009-01-02 08:00:00 2010-11-03 20:00:00
	-1 gbp_jpy .001943078 -.35207626	  291 2009-01-02 12:00:00 2010-11-23 18:00:00
	-1 gbp_usd .000007275 -.08296183	  300 2009-01-02 07:00:00 2010-11-23 19:00:00
	-1 usd_cad  .00038511 -.14933171	  297 2009-01-01 02:00:00 2010-11-24 18:00:00
	-1 usd_chf -.00034844 -.06764246	  290 2009-01-02 11:00:00 2010-11-04 18:00:00
	-1 usd_jpy  .00186287 -.45377992	  239 2009-01-06 21:00:00 2010-11-23 14:00:00
	 1 aud_usd -.00049659 -.17216689	  278 2009-01-01 02:00:00 2010-11-02 08:00:00
	 1 eur_aud .000361397  -.0003121	  294 2009-01-01 13:00:00 2010-11-12 11:00:00
	 1 eur_cad .000508802 .027483143	  315 2009-01-01 12:00:00 2010-11-16 15:00:00
	 1 eur_chf .000190291 .185039901	  273 2009-01-01 12:00:00 2010-11-22 03:00:00
	 1 eur_gbp -.00043338  -.0915171	  285 2009-01-02 09:00:00 2010-11-12 10:00:00
	 1 eur_jpy .000011007 .042010958	  224 2009-01-01 12:00:00 2010-11-12 14:00:00
	 1 eur_usd .000217999 -.09936633	  287 2009-01-06 18:00:00 2010-11-12 14:00:00
	 1 gbp_aud -.00028331 .084122162	  279 2009-01-01 22:00:00 2010-11-12 18:00:00
	 1 gbp_cad -.00056476  -.0445049	  304 2009-01-01 23:00:00 2010-10-26 12:00:00
	 1 gbp_chf -.00041551 .189815408	  305 2009-01-02 18:00:00 2010-11-18 21:00:00
	 1 gbp_jpy -.00026407  -.1819804	  273 2009-01-02 19:00:00 2010-11-12 16:00:00
	 1 gbp_usd -.00089543 -.18747536	  285 2009-01-05 18:00:00 2010-11-12 16:00:00
	 1 usd_cad .000179764 -.04719983	  288 2009-01-05 08:00:00 2010-11-26 11:00:00
	 1 usd_chf -.00055989 .110603997	  270 2009-01-02 04:00:00 2010-11-19 17:00:00
	 1 usd_jpy .000221459 -.00305263	  266 2009-01-02 19:00:00 2010-11-10 16:00:00

30 rows selected.

Elapsed: 00:00:07.41
08:10:41 SQL> 
08:10:41 SQL> -- npg6, stddev8:
08:10:41 SQL> SELECT
08:10:41   2  sgn8
08:10:41   3  ,pair
08:10:41   4  ,AVG(npg6)
08:10:41   5  ,CORR(ma8_slope,npg6)crr6
08:10:41   6  ,COUNT(ydate)
08:10:41   7  ,MIN(ydate)
08:10:41   8  ,MAX(ydate)
08:10:41   9  FROM v468hma14
08:10:41  10  WHERE ABS(ma8_slope) > 2.1*stddev8
08:10:41  11  GROUP BY sgn8,pair
08:10:41  12  ORDER BY sgn8,pair
08:10:41  13  /

      SGN8 PAIR     AVG(NPG6)	    CRR6 COUNT(YDATE) MIN(YDATE)	  MAX(YDATE)
---------- ------- ---------- ---------- ------------ ------------------- -------------------
	-1 aud_usd -.00012334 -.04929003	  270 2009-01-02 07:00:00 2010-11-09 22:00:00
	-1 eur_aud  .00012624 -.10281957	  267 2009-01-01 02:00:00 2010-11-15 16:00:00
	-1 eur_cad -.00006645  -.0321695	  311 2009-01-01 02:00:00 2010-11-24 20:00:00
	-1 eur_chf  -.0002485 .040418363	  287 2009-01-01 20:00:00 2010-11-23 18:00:00
	-1 eur_gbp .000288086  .16611438	  282 2009-01-01 22:00:00 2010-11-11 15:00:00
	-1 eur_jpy .001418517 -.34814248	  291 2009-01-02 02:00:00 2010-11-23 21:00:00
	-1 eur_usd -.00010502 .000475537	  257 2009-01-02 02:00:00 2010-11-23 21:00:00
	-1 gbp_aud .000735152 -.12401636	  284 2009-01-01 02:00:00 2010-11-02 11:00:00
	-1 gbp_cad .000101236 .005822451	  302 2009-01-01 02:00:00 2010-11-24 21:00:00
	-1 gbp_chf .000643534  -.0489751	  288 2009-01-02 08:00:00 2010-11-03 21:00:00
	-1 gbp_jpy .001722639 -.36180618	  274 2009-01-08 07:00:00 2010-11-23 17:00:00
	-1 gbp_usd  .00002236 .003439585	  288 2009-01-02 09:00:00 2010-11-23 21:00:00
	-1 usd_cad .000500705 -.21792479	  298 2009-01-01 02:00:00 2010-10-08 21:00:00
	-1 usd_chf -.00057588 -.09172872	  262 2009-01-06 21:00:00 2010-11-04 19:00:00
	-1 usd_jpy .002199221 -.43354535	  227 2009-01-06 23:00:00 2010-10-25 07:00:00
	 1 aud_usd -.00042086 -.28395267	  276 2009-01-01 02:00:00 2010-10-07 07:00:00
	 1 eur_aud .000976536 -.03461548	  264 2009-01-07 10:00:00 2010-11-19 10:00:00
	 1 eur_cad .000460798 .056522476	  312 2009-01-06 21:00:00 2010-11-16 15:00:00
	 1 eur_chf -.00009944 .241727819	  278 2009-01-01 12:00:00 2010-11-19 14:00:00
	 1 eur_gbp  -.0005951 -.19004171	  267 2009-01-01 12:00:00 2010-11-12 10:00:00
	 1 eur_jpy .000222715 .051948337	  236 2009-01-01 13:00:00 2010-11-12 16:00:00
	 1 eur_usd -.00037401 .019633047	  287 2009-01-06 19:00:00 2010-11-12 14:00:00
	 1 gbp_aud -.00025195 .082393791	  276 2009-01-01 23:00:00 2010-11-12 19:00:00
	 1 gbp_cad -.00041552 -.08129795	  298 2009-01-01 23:00:00 2010-11-18 19:00:00
	 1 gbp_chf -.00067964  .30288478	  302 2009-01-02 05:00:00 2010-11-18 23:00:00
	 1 gbp_jpy .000249112 -.19189582	  291 2009-01-02 21:00:00 2010-11-12 16:00:00
	 1 gbp_usd -.00103081 -.13761763	  306 2009-01-05 17:00:00 2010-11-04 14:00:00
	 1 usd_cad .000183921 .030218074	  299 2009-01-05 08:00:00 2010-11-26 12:00:00
	 1 usd_chf  -.0002973 .080179972	  264 2009-01-02 06:00:00 2010-11-23 19:00:00
	 1 usd_jpy .000324165 -.11726959	  263 2009-01-02 19:00:00 2010-11-10 17:00:00

30 rows selected.

Elapsed: 00:00:07.29
08:10:49 SQL> 
08:10:49 SQL> exit
Disconnected from Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options
