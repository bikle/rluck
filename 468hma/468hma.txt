
SQL*Plus: Release 11.2.0.1.0 Production on Sat Nov 27 20:28:16 2010

Copyright (c) 1982, 2009, Oracle.  All rights reserved.


Connected to:
Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options

20:28:16 SQL> ALTER SESSION SET NLS_DATE_FORMAT = 'YYYY-MM-DD hh24:mi:ss';

Session altered.

Elapsed: 00:00:00.00
20:28:16 SQL> 20:28:16 SQL> --
20:28:16 SQL> -- 468hma.sql
20:28:16 SQL> --
20:28:16 SQL> 
20:28:16 SQL> -- I use this script to help me answer the question,
20:28:16 SQL> -- Is moving average slope predictive?
20:28:16 SQL> 
20:28:16 SQL> CREATE OR REPLACE VIEW v468hma10 AS
20:28:16   2  SELECT
20:28:16   3  pair
20:28:16   4  -- ydate is granular down to the hour:
20:28:16   5  ,ydate
20:28:16   6  ,clse
20:28:16   7  -- Use analytic function to get moving average1:
20:28:16   8  ,AVG(clse)OVER(PARTITION BY pair ORDER BY ydate ROWS BETWEEN 5 PRECEDING AND 1 PRECEDING)ma1_4
20:28:16   9  ,AVG(clse)OVER(PARTITION BY pair ORDER BY ydate ROWS BETWEEN 7 PRECEDING AND 1 PRECEDING)ma1_6
20:28:16  10  ,AVG(clse)OVER(PARTITION BY pair ORDER BY ydate ROWS BETWEEN 9 PRECEDING AND 1 PRECEDING)ma1_8
20:28:16  11  ,AVG(clse)OVER(PARTITION BY pair ORDER BY ydate ROWS BETWEEN 10 PRECEDING AND 1 PRECEDING)ma1_9
20:28:16  12  ,AVG(clse)OVER(PARTITION BY pair ORDER BY ydate ROWS BETWEEN 13 PRECEDING AND 1 PRECEDING)ma1_12
20:28:16  13  ,AVG(clse)OVER(PARTITION BY pair ORDER BY ydate ROWS BETWEEN 19 PRECEDING AND 1 PRECEDING)ma1_18
20:28:16  14  -- Use analytic function to get moving average2:
20:28:16  15  ,AVG(clse)OVER(PARTITION BY pair ORDER BY ydate ROWS BETWEEN 4 PRECEDING AND CURRENT ROW)ma2_4
20:28:16  16  ,AVG(clse)OVER(PARTITION BY pair ORDER BY ydate ROWS BETWEEN 6 PRECEDING AND CURRENT ROW)ma2_6
20:28:16  17  ,AVG(clse)OVER(PARTITION BY pair ORDER BY ydate ROWS BETWEEN 8 PRECEDING AND CURRENT ROW)ma2_8
20:28:16  18  ,AVG(clse)OVER(PARTITION BY pair ORDER BY ydate ROWS BETWEEN 9 PRECEDING AND CURRENT ROW)ma2_9
20:28:16  19  ,AVG(clse)OVER(PARTITION BY pair ORDER BY ydate ROWS BETWEEN 12 PRECEDING AND CURRENT ROW)ma2_12
20:28:16  20  ,AVG(clse)OVER(PARTITION BY pair ORDER BY ydate ROWS BETWEEN 18 PRECEDING AND CURRENT ROW)ma2_18
20:28:16  21  -- Get future ydates
20:28:16  22  ,LEAD(ydate,4,NULL)OVER(PARTITION BY pair ORDER BY ydate) ydate4
20:28:16  23  ,LEAD(ydate,6,NULL)OVER(PARTITION BY pair ORDER BY ydate) ydate6
20:28:16  24  ,LEAD(ydate,8,NULL)OVER(PARTITION BY pair ORDER BY ydate) ydate8
20:28:16  25  -- Relative to current-row, get future closing prices:
20:28:16  26  ,LEAD(clse,4,NULL)OVER(PARTITION BY pair ORDER BY ydate) clse4
20:28:16  27  ,LEAD(clse,6,NULL)OVER(PARTITION BY pair ORDER BY ydate) clse6
20:28:16  28  ,LEAD(clse,8,NULL)OVER(PARTITION BY pair ORDER BY ydate) clse8
20:28:16  29  FROM h15c
20:28:16  30  WHERE ydate >'2009-01-01'
20:28:16  31  -- Prevent divide by zero:
20:28:16  32  AND clse > 0
20:28:16  33  ORDER BY ydate
20:28:16  34  /

View created.

Elapsed: 00:00:00.05
20:28:16 SQL> 
20:28:16 SQL> -- I should see 6 x 6:
20:28:16 SQL> SELECT pair,COUNT(*)FROM v468hma10 WHERE ydate6 IS NULL GROUP BY pair;

PAIR	  COUNT(*)
------- ----------
eur_usd 	 6
gbp_usd 	 6
usd_jpy 	 6
gbp_cad 	 6
gbp_jpy 	 6
gbp_chf 	 6
gbp_aud 	 6
eur_gbp 	 6
eur_jpy 	 6
eur_aud 	 6
eur_cad 	 6
usd_cad 	 6
eur_chf 	 6
aud_usd 	 6
usd_chf 	 6

15 rows selected.

Elapsed: 00:00:03.67
20:28:20 SQL> -- I should see 6 x 6:
20:28:20 SQL> SELECT pair,COUNT(*)FROM v468hma10 WHERE clse6 IS NULL GROUP BY pair;

PAIR	  COUNT(*)
------- ----------
eur_usd 	 6
gbp_usd 	 6
usd_jpy 	 6
gbp_cad 	 6
gbp_jpy 	 6
gbp_chf 	 6
gbp_aud 	 6
eur_gbp 	 6
eur_jpy 	 6
eur_aud 	 6
eur_cad 	 6
usd_cad 	 6
eur_chf 	 6
aud_usd 	 6
usd_chf 	 6

15 rows selected.

Elapsed: 00:00:03.65
20:28:23 SQL> 
20:28:23 SQL> -- I derive "normalized" slope of moving-averages:
20:28:23 SQL> CREATE OR REPLACE VIEW v468hma AS
20:28:23   2  SELECT
20:28:23   3  pair
20:28:23   4  ,ydate
20:28:23   5  ,(ma2_4 - ma1_4)/ma1_4 ma4_slope
20:28:23   6  ,(ma2_6 - ma1_6)/ma1_6 ma6_slope
20:28:23   7  ,(ma2_8 - ma1_8)/ma1_8 ma8_slope
20:28:23   8  ,(ma2_9 - ma1_9)/ma1_9 ma9_slope
20:28:23   9  ,(ma2_12 - ma1_12)/ma1_12 ma12_slope
20:28:23  10  ,(ma2_18 - ma1_18)/ma1_18 ma18_slope
20:28:23  11  ,ydate4
20:28:23  12  ,ydate6
20:28:23  13  ,ydate8
20:28:23  14  ,clse4
20:28:23  15  ,clse6
20:28:23  16  ,clse8
20:28:23  17  ,(clse4 - clse)/clse npg4
20:28:23  18  ,(clse6 - clse)/clse npg6
20:28:23  19  ,(clse8 - clse)/clse npg8
20:28:23  20  FROM v468hma10
20:28:23  21  ORDER BY ydate
20:28:23  22  /

View created.

Elapsed: 00:00:00.05
20:28:23 SQL> 
20:28:23 SQL> -- Is ma_slope correlated with npg4?
20:28:23 SQL> COLUMN pair FORMAT A7
20:28:23 SQL> 
20:28:23 SQL> SELECT
20:28:23   2  pair
20:28:23   3  ,COUNT(npg4)
20:28:23   4  ,ROUND(CORR(ma4_slope,npg4),2)corr4
20:28:23   5  ,ROUND(CORR(ma6_slope,npg4),2)corr6
20:28:23   6  ,ROUND(CORR(ma8_slope,npg4),2)corr8
20:28:23   7  ,ROUND(CORR(ma9_slope,npg4),2)corr9
20:28:23   8  ,ROUND(CORR(ma12_slope,npg4),2)corr12
20:28:23   9  ,ROUND(CORR(ma18_slope,npg4),2)corr18
20:28:23  10  FROM v468hma
20:28:23  11  GROUP BY pair
20:28:23  12  ORDER BY pair
20:28:23  13  /

PAIR	COUNT(NPG4)	 CORR4	    CORR6      CORR8	  CORR9     CORR12     CORR18
------- ----------- ---------- ---------- ---------- ---------- ---------- ----------
aud_usd       11989	  -.15	     -.24	-.22	   -.21        -.2	 -.16
eur_aud       11989	  -.09	     -.15	-.14	   -.13       -.11	 -.08
eur_cad       11989	  -.03	     -.06	-.05	   -.05       -.04	 -.01
eur_chf       11989	  -.17	     -.26	-.24	   -.23       -.22	 -.19
eur_gbp       11977	  -.23	     -.36	-.34	   -.33       -.31	 -.26
eur_jpy       11989	  -.09	     -.14	-.12	   -.11       -.11	 -.09
eur_usd       11989	  -.08	     -.13	-.12	   -.11       -.11	 -.08
gbp_aud       11977	  -.23	     -.33	-.32	   -.32        -.3	 -.27
gbp_cad       11977	  -.22	     -.33	-.31	   -.31       -.29	 -.25
gbp_chf       11977	  -.24	     -.34	-.33	   -.32       -.31	 -.28
gbp_jpy       11977	   -.2	     -.29	-.27	   -.27       -.25	 -.22
gbp_usd       11977	  -.09	     -.15	-.13	   -.13       -.13	 -.09
usd_cad       11989	  -.15	     -.23	-.21	   -.21       -.19	 -.15
usd_chf       11989	   -.2	      -.3	-.28	   -.27       -.25	 -.23
usd_jpy       11989	  -.21	     -.31	 -.3	   -.29       -.27	 -.24

15 rows selected.

Elapsed: 00:00:14.75
20:28:38 SQL> 
20:28:38 SQL> -- Is ma_slope correlated with npg6?
20:28:38 SQL> SELECT
20:28:38   2  pair
20:28:38   3  ,COUNT(npg6)
20:28:38   4  ,ROUND(CORR(ma4_slope,npg6),2)corr4
20:28:38   5  ,ROUND(CORR(ma6_slope,npg6),2)corr6
20:28:38   6  ,ROUND(CORR(ma8_slope,npg6),2)corr8
20:28:38   7  ,ROUND(CORR(ma9_slope,npg6),2)corr9
20:28:38   8  ,ROUND(CORR(ma12_slope,npg6),2)corr12
20:28:38   9  ,ROUND(CORR(ma18_slope,npg6),2)corr18
20:28:38  10  FROM v468hma
20:28:38  11  GROUP BY pair
20:28:38  12  ORDER BY pair
20:28:38  13  /

PAIR	COUNT(NPG6)	 CORR4	    CORR6      CORR8	  CORR9     CORR12     CORR18
------- ----------- ---------- ---------- ---------- ---------- ---------- ----------
aud_usd       11987	  -.13	     -.22	 -.2	    -.2       -.18	 -.15
eur_aud       11987	  -.08	     -.13	-.12	   -.11       -.09	 -.06
eur_cad       11987	  -.02	     -.04	-.04	   -.04       -.03	  .01
eur_chf       11987	  -.15	     -.24	-.22	   -.21        -.2	 -.17
eur_gbp       11975	  -.22	     -.34	-.33	   -.32       -.29	 -.24
eur_jpy       11987	  -.08	     -.11	 -.1	    -.1        -.1	 -.07
eur_usd       11987	  -.06	     -.11	 -.1	    -.1       -.09	 -.06
gbp_aud       11975	  -.22	     -.32	-.31	    -.3       -.29	 -.26
gbp_cad       11975	  -.22	     -.31	 -.3	    -.3       -.28	 -.24
gbp_chf       11975	  -.23	     -.33	-.31	   -.31       -.29	 -.27
gbp_jpy       11975	  -.19	     -.27	-.26	   -.25       -.24	  -.2
gbp_usd       11975	  -.08	     -.13	-.13	   -.13       -.11	 -.07
usd_cad       11987	  -.13	     -.21	-.19	   -.19       -.17	 -.14
usd_chf       11987	  -.19	     -.27	-.26	   -.25       -.24	 -.22
usd_jpy       11987	   -.2	     -.29	-.28	   -.28       -.26	 -.22

15 rows selected.

Elapsed: 00:00:14.75
20:28:53 SQL> 
20:28:53 SQL> -- Is ma_slope correlated with npg8?
20:28:53 SQL> SELECT
20:28:53   2  pair
20:28:53   3  ,COUNT(npg8)
20:28:53   4  ,ROUND(CORR(ma4_slope,npg8),2)corr4
20:28:53   5  ,ROUND(CORR(ma6_slope,npg8),2)corr6
20:28:53   6  ,ROUND(CORR(ma8_slope,npg8),2)corr8
20:28:53   7  ,ROUND(CORR(ma9_slope,npg8),2)corr9
20:28:53   8  ,ROUND(CORR(ma12_slope,npg8),2)corr12
20:28:53   9  ,ROUND(CORR(ma18_slope,npg8),2)corr18
20:28:53  10  FROM v468hma
20:28:53  11  GROUP BY pair
20:28:53  12  ORDER BY pair
20:28:53  13  /

PAIR	COUNT(NPG8)	 CORR4	    CORR6      CORR8	  CORR9     CORR12     CORR18
------- ----------- ---------- ---------- ---------- ---------- ---------- ----------
aud_usd       11985	  -.12	      -.2	-.18	   -.18       -.16	 -.14
eur_aud       11985	  -.07	     -.12	 -.1	   -.09       -.07	 -.05
eur_cad       11985	  -.02	     -.04	-.04	   -.03       -.02	  .02
eur_chf       11985	  -.14	     -.22	-.21	    -.2       -.19	 -.16
eur_gbp       11973	  -.21	     -.33	-.31	    -.3       -.27	 -.22
eur_jpy       11985	  -.07	     -.11	 -.1	    -.1       -.09	 -.07
eur_usd       11985	  -.05	      -.1	 -.1	   -.09       -.08	 -.06
gbp_aud       11973	  -.21	     -.31	-.29	   -.29       -.27	 -.24
gbp_cad       11973	  -.21	      -.3	-.29	   -.28       -.26	 -.21
gbp_chf       11973	  -.22	     -.31	 -.3	    -.3       -.28	 -.26
gbp_jpy       11973	  -.17	     -.26	-.24	   -.24       -.22	 -.18
gbp_usd       11973	  -.08	     -.13	-.12	   -.12        -.1	 -.05
usd_cad       11985	  -.12	     -.19	-.18	   -.17       -.15	 -.12
usd_chf       11985	  -.17	     -.26	-.24	   -.24       -.22	 -.22
usd_jpy       11985	   -.2	     -.28	-.27	   -.26       -.24	 -.21

15 rows selected.

Elapsed: 00:00:14.76
20:29:08 SQL> 
20:29:08 SQL> 
20:29:08 SQL> -- Look at ma4_slope and npg4,6,8:
20:29:08 SQL> SELECT
20:29:08   2  pair
20:29:08   3  ,nt74
20:29:08   4  ,AVG(ma4_slope)avg_ma4s
20:29:08   5  ,AVG(npg4)avg_npg4
20:29:08   6  ,AVG(npg6)avg_npg6
20:29:08   7  ,AVG(npg8)avg_npg8
20:29:08   8  ,COUNT(pair)
20:29:08   9  ,STDDEV(npg4)stddev_npg4
20:29:08  10  FROM
20:29:08  11  (
20:29:08  12  	SELECT
20:29:08  13  	pair
20:29:08  14  	,NTILE(7) OVER (PARTITION BY pair ORDER BY (ma4_slope))nt74
20:29:08  15  	,ma4_slope
20:29:08  16  	,npg4,npg6,npg8
20:29:08  17  	FROM v468hma
20:29:08  18  )
20:29:08  19  GROUP BY pair,nt74
20:29:08  20  ORDER BY pair,nt74
20:29:08  21  /

PAIR	      NT74   AVG_MA4S	AVG_NPG4   AVG_NPG6   AVG_NPG8 COUNT(PAIR) STDDEV_NPG4
------- ---------- ---------- ---------- ---------- ---------- ----------- -----------
aud_usd 	 1 -.00149681 .000291547 .000228409 .000293852	      1714  .008348233
aud_usd 	 2 -.00060042 .000051195 .000043386 -.00004422	      1714  .004166759
aud_usd 	 3 -.00023782 .000148064 .000170408 .000245047	      1713  .003815799
aud_usd 	 4 .000035204 .000174452 .000193949 .000282785	      1713  .007872358
aud_usd 	 5 .000305664	.0000294 .000194697 .000296979	      1713   .00387536
aud_usd 	 6 .000653435 -.00006359  .00014969 .000244389	      1713  .008656643
aud_usd 	 7 .001529283 .000226075 .000267769 .000323837	      1713  .004510799
eur_aud 	 1 -.00109978 -.00010183 -.00019698 -.00022094	      1714   .00332207
eur_aud 	 2 -.00048345 -.00010351 .000029511 .000041174	      1714  .002932336
eur_aud 	 3 -.00022728 -.00011748 -.00025342  -.0003649	      1713  .004418106
eur_aud 	 4 -.00003305 .000038311 -.00017085 -.00021481	      1713   .00528958
eur_aud 	 5 .000153427 -.00011616 -.00013871 -.00027488	      1713   .00268628
eur_aud 	 6 .000402517 -.00025661 -.00031431 -.00034395	      1713   .00283784
eur_aud 	 7 .001077665 -.00013888 -.00015834 -.00023674	      1713  .004720628
eur_cad 	 1 -.00106756 1.2095E-06  .00001426 -.00001065	      1714  .003453379
eur_cad 	 2 -.00040538 -.00010329 -.00015301 -.00017592	      1714  .002724747
eur_cad 	 3 -.00018218 -.00001743  -.0001424 -.00012498	      1713  .002655356
eur_cad 	 4 -.00001978 -.00012115 -.00015502 -.00024456	      1713  .003585514
eur_cad 	 5 .000143302 -.00015786 -.00021849 -.00028617	      1713  .003297642
eur_cad 	 6 .000366442 -.00009773 -.00010662 -.00009712	      1713  .002979254
eur_cad 	 7 .001030555 -7.372E-06 3.5493E-06 -.00007365	      1713  .003799117
eur_chf 	 1 -.00067835  .00004452 .000032914 .000087072	      1714  .002504497
eur_chf 	 2 -.00021999 -.00003548 -.00003167 -.00004311	      1714  .001947062
eur_chf 	 3 -.00008596	.0000589 .000058931 .000120775	      1713  .001546764
eur_chf 	 4 -9.501E-06 -.00002112 -1.627E-06 3.8649E-06	      1713  .003210187
eur_chf 	 5 .000064322  -.0000694 -.00007627 -.00014319	      1713  .001443139
eur_chf 	 6 .000185388 -.00005025 -.00018912 -.00020092	      1713  .004065368
eur_chf 	 7 .000677504 -.00016749 -.00016489 -.00032825	      1713  .005281175
eur_gbp 	 1 -.00104097 .000093899 .000180612 .000164728	      1712  .007660001
eur_gbp 	 2 -.00039156 .000075286 .000139356 .000128414	      1712   .00276497
eur_gbp 	 3 -.00016583 -.00014321 7.5722E-07 -2.771E-06	      1712  .005980316
eur_gbp 	 4 -.00001247 .000118733 .000073331 .000083704	      1712   .00732004
eur_gbp 	 5 .000142131 .000075196 9.7629E-06  -.0001519	      1711   .00269121
eur_gbp 	 6 .000364833 -.00013842  -.0001823 -.00020795	      1711  .006122889
eur_gbp 	 7 .001039702 -.00025149 -.00051779 -.00043982	      1711   .00323458
eur_jpy 	 1 -.00152344 .000116562 .000238707 .000126447	      1714   .00525882
eur_jpy 	 2 -.00060603 .000015726 -.00016395 -.00009184	      1714  .004190697
eur_jpy 	 3 -.00024861 -.00016453  -.0002607 -.00033852	      1713  .003913401
eur_jpy 	 4 .000010775 -.00025567  -.0003094 -.00030516	      1713  .004962161
eur_jpy 	 5 .000261092 -8.475E-06 .000137366 .000148915	      1713  .003819548
eur_jpy 	 6 .000596499 .000086588 -.00013384 -.00021937	      1713  .006756263
eur_jpy 	 7 .001439596 -.00000441  .00015577 .000219017	      1713  .005748415
eur_usd 	 1 -.00110151 -8.488E-06 -.00007208 -.00014072	      1714  .004500546
eur_usd 	 2 -.00043937 -.00005618 -.00004206 -.00009803	      1714  .003032949
eur_usd 	 3 -.00018982 -.00005429 -.00007856 .000017338	      1713  .002856087
eur_usd 	 4  -.0000031 .000134718 .000145517 .000136772	      1713  .004177592
eur_usd 	 5 .000179624 -.00002482 -.00006942 -.00010151	      1713  .002910446
eur_usd 	 6 .000425725 2.3156E-06 .000059952 .000051832	      1713  .004127924
eur_usd 	 7 .001100571 -.00006861 -.00006467 -.00003402	      1713  .004483037
gbp_aud 	 1 -.00126767 -1.922E-06 -.00007752 -.00001372	      1712  .003756842
gbp_aud 	 2 -.00054912 .000362501  .00057195  .00052269	      1712  .011764809
gbp_aud 	 3 -.00025492 -.00011599 -.00011314 -.00016968	      1712  .003188666
gbp_aud 	 4  -.0000302  -.0002832 -.00027858 -.00043929	      1712  .008278753
gbp_aud 	 5 .000200287 .000228872 -.00008559 -.00006193	      1711   .01173174
gbp_aud 	 6 .000492962 -.00017237 -.00025091 -.00027131	      1711  .003273997
gbp_aud 	 7 .001271872 -.00037998 -.00039111 -.00045914	      1711  .008651014
gbp_cad 	 1 -.00121162 .000221894 .000514243 .000358188	      1712  .003621193
gbp_cad 	 2 -.00046168 .000267761 .000096515 .000327022	      1712  .009880124
gbp_cad 	 3 -.00020572  -.0001025 .000088313 .000084905	      1712  .002915213
gbp_cad 	 4 -.00001873 -.00017398 -.00021546 -.00028962	      1712  .007294783
gbp_cad 	 5 .000173844 .000133687 -.00003446 -.00002809	      1711  .009861813
gbp_cad 	 6 .000439225 -.00019619  -.0002548  -.0002771	      1711  .003379462
gbp_cad 	 7 .001222085 -.00025522 -.00040906 -.00050198	      1711   .00771894
gbp_chf 	 1 -.00119452 .000251156 .000355297 .000342245	      1712   .00387626
gbp_chf 	 2 -.00041858 .000141183 .000471752 .000500122	      1712  .003004757
gbp_chf 	 3 -.00017256 .000239777 -.00002412 .000219482	      1712  .011908862
gbp_chf 	 4 -.00000065 -.00025708 -8.238E-06 -.00025584	      1712  .008032116
gbp_chf 	 5 .000167531 .000024055 -.00002662 -.00008398	      1711  .003047379
gbp_chf 	 6 .000417511 .000081186 -.00016104 -.00008457	      1711  .011885339
gbp_chf 	 7 .001209228 -.00026852 -.00037452 -.00038456	      1711  .008693191
gbp_jpy 	 1 -.00168735 .000360048 .000365352 .000305098	      1712  .005933089
gbp_jpy 	 2 -.00064491 .000082104 .000059473 -.00003352	      1712  .004746104
gbp_jpy 	 3 -.00026398 -.00032883 -.00037475 -.00041135	      1712  .004189413
gbp_jpy 	 4 5.5387E-06 -.00018226 -.00022909 -.00016974	      1712   .01508165
gbp_jpy 	 5 .000263638 -.00016208 .000162491 .000219319	      1711   .00395025
gbp_jpy 	 6 .000644962 .000461112 .000170744 .000110689	      1711  .012765631
gbp_jpy 	 7 .001685991 7.9147E-06 .000108552 .000265382	      1711  .009495923
gbp_usd 	 1 -.00119218 .000051327 .000036946 .000075284	      1712  .003923247
gbp_usd 	 2 -.00046121 -.00005853 -.00005238 -.00010502	      1712  .003311582
gbp_usd 	 3 -.00019176 .000086426 .000099722 .000139122	      1712  .003237808
gbp_usd 	 4 1.7986E-06 -.00001255 .000010175  .00006369	      1712  .005508225
gbp_usd 	 5  .00019991 .000045974 .000160562 .000132342	      1711  .002981857
gbp_usd 	 6 .000467694 .000100924 .000100522 .000256273	      1711  .003330918
gbp_usd 	 7 .001216934 -5.706E-06 -.00005046 -.00015928	      1711  .005875491
usd_cad 	 1 -.00120264 .000030421   .0000971 .000202748	      1714  .003583321
usd_cad 	 2 -.00048754 .000238547 .000047455 -.00013538	      1714  .007958055
usd_cad 	 3 -.00021696 -.00007621 -.00014395 -.00006942	      1713  .002903525
usd_cad 	 4 -.00001964 -.00028585 -.00028705 -.00044339	      1713  .005152355
usd_cad 	 5 .000178044 -.00007009  -.0000663 -.00003341	      1713  .003029374
usd_cad 	 6  .00045442 -.00007275  -.0001094  -.0001642	      1713  .003411967
usd_cad 	 7 .001192582 -.00009655 -.00005912 -.00006681	      1713  .005831111
usd_chf 	 1 -.00110638 6.6007E-06 -.00002905 .000143167	      1714  .003545338
usd_chf 	 2 -.00041604 .000091772 .000263199 .000238528	      1714  .003186726
usd_chf 	 3 -.00018462  .00036267 .000194349 .000018977	      1713  .010301491
usd_chf 	 4  -.0000068  -.0001593 -.00010368 -.00009421	      1713  .005982482
usd_chf 	 5 .000170621 -.00003936 -.00007558  -.0001869	      1713  .002793534
usd_chf 	 6 .000400117 -.00002599 -.00003169 .000026322	      1713  .002868818
usd_chf 	 7 .001110861  -.0002766 -.00031755  -.0003051	      1713  .006481905
usd_jpy 	 1 -.00110783 .000350634 .000460992 .000461228	      1714  .003777821
usd_jpy 	 2 -.00043103 -.00008475 -.00018835 -.00026123	      1714  .003005714
usd_jpy 	 3 -.00018678 .000072461 .000068592  .00011701	      1713  .008066936
usd_jpy 	 4 -6.886E-06 -.00005039 -.00022381 -5.367E-06	      1713  .009868211
usd_jpy 	 5 .000171285 -.00011933 -.00017421 -.00019284	      1713  .003019454
usd_jpy 	 6 .000410393 -.00011293 .000062435 -.00016066	      1713  .002998417
usd_jpy 	 7 .001111723 -.00011327  -.0001364 -.00016307	      1713  .006550804

105 rows selected.

Elapsed: 00:00:04.90
20:29:12 SQL> 
20:29:12 SQL> 
20:29:12 SQL> -- Look at ma8_slope and npg4,6,8:
20:29:12 SQL> SELECT
20:29:12   2  pair
20:29:12   3  ,nt74
20:29:12   4  ,AVG(ma8_slope)avg_ma8s
20:29:12   5  ,AVG(npg4)avg_npg4
20:29:12   6  ,AVG(npg6)avg_npg6
20:29:12   7  ,AVG(npg8)avg_npg8
20:29:12   8  ,COUNT(pair)
20:29:12   9  ,STDDEV(npg4)stddev_npg4
20:29:12  10  FROM
20:29:12  11  (
20:29:12  12  	SELECT
20:29:12  13  	pair
20:29:12  14  	,NTILE(7) OVER (PARTITION BY pair ORDER BY (ma8_slope))nt74
20:29:12  15  	,ma8_slope
20:29:12  16  	,npg4,npg6,npg8
20:29:12  17  	FROM v468hma
20:29:12  18  )
20:29:12  19  GROUP BY pair,nt74
20:29:12  20  ORDER BY pair,nt74
20:29:12  21  /

PAIR	      NT74   AVG_MA8S	AVG_NPG4   AVG_NPG6   AVG_NPG8 COUNT(PAIR) STDDEV_NPG4
------- ---------- ---------- ---------- ---------- ---------- ----------- -----------
aud_usd 	 1 -.00112088 .000280442 .000369444  .00046297	      1714    .0108169
aud_usd 	 2 -.00046203 .000105687 .000145157 .000191614	      1714     .004423
aud_usd 	 3 -.00017856 .000165871 .000278119 .000297678	      1713  .004029384
aud_usd 	 4 .000030484 -7.187E-06  .00003448 .000010103	      1713  .004064445
aud_usd 	 5 .000237611 .000194747 .000181291 .000222976	      1713  .003702541
aud_usd 	 6 .000519588 .000181719 .000050369 .000062005	      1713   .00405486
aud_usd 	 7 .001160208 -.00006411 .000189557 .000395208	      1713  .008622054
eur_aud 	 1 -.00083753 -.00019415 -.00020117 -.00025181	      1714  .003207928
eur_aud 	 2  -.0003727 .000041546 9.3078E-06 -.00004191	      1714  .002929057
eur_aud 	 3 -.00018231  -.0000782 -.00013374 -.00022356	      1713  .004343258
eur_aud 	 4 -.00003362 -.00007085 -.00018076 -.00044346	      1713  .004342504
eur_aud 	 5  .00011236 -.00017304 -.00024026  -.0002253	      1713  .002748105
eur_aud 	 6 .000298262 -.00005345 -.00021203 -.00019938	      1713  .003053453
eur_aud 	 7 .000803997 -.00026804 -.00024442 -.00022915	      1713  .005584632
eur_cad 	 1 -.00080097 -.00005029 -.00003454 -.00005497	      1714  .003133877
eur_cad 	 2 -.00032645 -.00012141 -.00014013 -.00014768	      1714   .00299357
eur_cad 	 3 -.00015436 -.00004819 -.00020037 -.00015707	      1713  .002600056
eur_cad 	 4 -.00002544 -.00006575  -.0000252 -.00012519	      1713  .002910521
eur_cad 	 5 .000107774 -.00009474 -.00017244 -.00028827	      1713  .003783436
eur_cad 	 6 .000284855 -.00001682 -.00006086 -.00008379	      1713  .002941083
eur_cad 	 7 .000778734 -.00010632 -.00012387 -.00015604	      1713  .004058776
eur_chf 	 1 -.00051509  .00007871 .000082904 .000109645	      1714  .002569045
eur_chf 	 2  -.0001729 .000040881 .000096817 .000080551	      1714  .001925066
eur_chf 	 3 -.00006949 .000028044 .000041112 .000024307	      1713   .00152684
eur_chf 	 4 -9.194E-06 -.00001524 -.00003819 -.00001095	      1713  .001363636
eur_chf 	 5 .000045903  -.0000975  -.0001437 -.00015741	      1713   .00174295
eur_chf 	 6 .000139694 -.00017892 -.00017394 -.00014457	      1713  .001768904
eur_chf 	 7 .000513613 -.00009647 -.00023658 -.00040492	      1713  .006970427
eur_gbp 	 1 -.00077795 .000437551 .000522073 .000579411	      1712  .010195654
eur_gbp 	 2 -.00031497  -.0000667 -.00007603 -.00007326	      1712  .002666856
eur_gbp 	 3 -.00014243 -.00005633 .000010044 -.00001026	      1712  .002729179
eur_gbp 	 4 -.00001343 -.00001871 -.00003904 -.00006253	      1712  .002732466
eur_gbp 	 5 .000117838 -.00006228 -5.529E-06 -.00010606	      1711  .006055201
eur_gbp 	 6 .000292683 -.00007754 -.00028786 -.00044341	      1711  .002962813
eur_gbp 	 7 .000772162 -.00032643 -.00042022 -.00030931	      1711  .006268906
eur_jpy 	 1 -.00113903 .000147846 .000219178  .00031377	      1714  .005395066
eur_jpy 	 2 -.00047587 -.00031646 -.00042597 -.00054338	      1714  .004333098
eur_jpy 	 3  -.0001983 -.00012645 -.00030688 -.00033555	      1713  .003858287
eur_jpy 	 4 .000010317 .000079466 .000122601 .000157779	      1713  .003730004
eur_jpy 	 5 .000206722 -.00001678  .00006864 .000100761	      1713  .003809224
eur_jpy 	 6  .00045662 .000120599 -.00003069 -.00010563	      1713  .006758802
eur_jpy 	 7  .00106704 -.00010191 .000017807 -.00004771	      1713  .006443318
eur_usd 	 1 -.00083305 .000023856 .000014931    -.00007	      1714  .005343845
eur_usd 	 2 -.00035451 1.7684E-06 -5.158E-07 .000074651	      1714   .00308588
eur_usd 	 3 -.00015278 -1.425E-06 .000028003 .000037895	      1713  .002990043
eur_usd 	 4 -4.353E-06 -.00001554 -.00003668 -5.887E-06	      1713  .002960223
eur_usd 	 5 .000138233 4.3746E-06 .000012113 9.3384E-07	      1713  .002873403
eur_usd 	 6 .000339484 -.00004968 -.00012693  -.0001083	      1713  .003200404
eur_usd 	 7 .000837761  -.0000388 -.00001248 -.00009788	      1713  .005138081
gbp_aud 	 1 -.00095984 .000190556 .000141153 .000078573	      1712  .011862279
gbp_aud 	 2 -.00042046 .000057725 .000432707  .00016656	      1712  .003247438
gbp_aud 	 3 -.00020083 .000325225 -.00002169 .000159786	      1712  .011722571
gbp_aud 	 4 -.00002551 -.00011668 -.00015888 -.00024694	      1712  .003229426
gbp_aud 	 5 .000146026 -.00018288 -.00028395 -.00032562	      1711  .003266794
gbp_aud 	 6 .000367965 -.00008593 -.00020237 -.00019217	      1711  .003490836
gbp_aud 	 7 .000952757 -.00054985 -.00053159 -.00053307	      1711   .01150694
gbp_cad 	 1 -.00090961 .000089417  .00041279 .000137637	      1712   .00351129
gbp_cad 	 2 -.00036569 .000377625 .000199838 .000552531	      1712  .009880903
gbp_cad 	 3 -.00016355 .000053151 .000308557 .000063006	      1712  .003170237
gbp_cad 	 4 -.00001797 .000145298 -.00014204 .000092146	      1712  .009804708
gbp_cad 	 5 .000132219  -.0001193 -.00005944 -.00010161	      1711  .003380554
gbp_cad 	 6  .00034071 -.00005671 -.00019039 -.00028051	      1711   .00332262
gbp_cad 	 7 .000919002 -.00059404 -.00074401 -.00079041	      1711  .010087409
gbp_chf 	 1 -.00088777 .000187889 .000270869 .000199452	      1712  .003786784
gbp_chf 	 2 -.00033443 .000178971 .000232058 .000257874	      1712  .003197596
gbp_chf 	 3 -.00014395 .000202892 .000469285 .000479679	      1712  .011927753
gbp_chf 	 4 -1.098E-07 -.00008595 -.00006898 -.00001414	      1712  .002853357
gbp_chf 	 5 .000139009 .000021831 .000026706 .000040584	      1711  .003006791
gbp_chf 	 6 .000327957 .000206027 -.00012643 -.00009421	      1711  .011888647
gbp_chf 	 7 .000904405 -.00049974 -.00057079  -.0006167	      1711  .011440416
gbp_jpy 	 1 -.00127227 .000136562  .00015078 .000263094	      1712  .006319262
gbp_jpy 	 2 -.00051011 -.00014237 -.00027727 -.00037176	      1712  .004646862
gbp_jpy 	 3 -.00020733 -.00013216 -.00015716  .00005528	      1712   .00428756
gbp_jpy 	 4 5.4789E-06 .000370738 .000123608 .000016294	      1712  .012746393
gbp_jpy 	 5 .000215175  -.0000667 .000523635 .000176566	      1711  .004009957
gbp_jpy 	 6 .000507085	 .000204 -.00007274 .000069602	      1711  .012716905
gbp_jpy 	 7   .0012617 -.00013188 -.00002805 .000076945	      1711  .012312232
gbp_usd 	 1 -.00089659 -6.174E-06 .000123452  .00015268	      1712  .004070069
gbp_usd 	 2 -.00036622 .000066499 3.8868E-06 .000136977	      1712   .00338155
gbp_usd 	 3 -.00015168  .00006657  .00005256 .000083109	      1712  .003101738
gbp_usd 	 4 3.7121E-06 -4.264E-06 .000106897 3.2475E-06	      1712  .003062484
gbp_usd 	 5 .000162152 .000181609 .000164196 .000262814	      1711  .004782707
gbp_usd 	 6 .000380768 .000055258 .000122639 .000079516	      1711  .003302452
gbp_usd 	 7 .000907834 -.00015176 -.00026848  -.0003157	      1711  .006394578
usd_cad 	 1 -.00091181 .000307973  .00033317 .000381673	      1714  .006029684
usd_cad 	 2 -.00038255  .00014594 .000109912 -3.601E-06	      1714  .005978098
usd_cad 	 3 -.00017886 -.00012732 -.00012096 -.00025349	      1713  .003189482
usd_cad 	 4 -.00002199 -.00023766 -.00028042 -.00028813	      1713  .003021594
usd_cad 	 5 .000138138 -.00022314 -.00035327 -.00034502	      1713  .003373575
usd_cad 	 6 .000354613 -.00001145 .000039569 .000151521	      1713  .003671111
usd_cad 	 7 .000899017 -.00018743 -.00025032 -.00035404	      1713  .007040948
usd_chf 	 1 -.00083716 -.00005839 -.00003848 -5.258E-06	      1714  .003320889
usd_chf 	 2 -.00032934  .00037064 .000384956 .000255733	      1714  .010325087
usd_chf 	 3  -.0001466 .000070389 .000071129 3.4971E-06	      1713  .003016947
usd_chf 	 4 -6.478E-06 .000136368 .000140566 .000116584	      1713  .003114443
usd_chf 	 5 .000131098 -.00005873 -.00004366 .000191989	      1713  .002955076
usd_chf 	 6 .000315724 -.00009963  -.0000801 -.00019545	      1713  .003136182
usd_chf 	 7 .000838654 -.00040096 -.00053434  -.0005253	      1713  .008213309
usd_jpy 	 1 -.00082166 .000348834 .000412046 .000396397	      1714  .003760538
usd_jpy 	 2 -.00034652 -.00008149 -.00012586 -.00009244	      1714  .003168335
usd_jpy 	 3 -.00015599 .000114101 -.00034392 -.00049084	      1713  .011045178
usd_jpy 	 4 -9.406E-06 -.00016786 -.00015323 -.00013009	      1713  .003003821
usd_jpy 	 5 .000133898 -.00003784 .000316083  .00037057	      1713  .003104384
usd_jpy 	 6 .000322717 .000046146 .000083682 .000067476	      1713  .002832819
usd_jpy 	 7 .000835738 -.00027915 -.00031876  -.0003248	      1713  .008587408

105 rows selected.

Elapsed: 00:00:04.91
20:29:17 SQL> 
20:29:17 SQL> 
20:29:17 SQL> -- Instead of using NTILE() to categorize ma-slope,
20:29:17 SQL> -- I use 3 std-deviations ma-slope.
20:29:17 SQL> 
20:29:17 SQL> 
20:29:17 SQL> CREATE OR REPLACE VIEW v468hma12 AS
20:29:17   2  SELECT
20:29:17   3  pair
20:29:17   4  ,ydate
20:29:17   5  ,(ma2_4 - ma1_4)/ma1_4 ma4_slope
20:29:17   6  ,(ma2_6 - ma1_6)/ma1_6 ma6_slope
20:29:17   7  ,(ma2_8 - ma1_8)/ma1_8 ma8_slope
20:29:17   8  ,(ma2_9 - ma1_9)/ma1_9 ma9_slope
20:29:17   9  ,(ma2_12 - ma1_12)/ma1_12 ma12_slope
20:29:17  10  ,(ma2_18 - ma1_18)/ma1_18 ma18_slope
20:29:17  11  ,ydate4
20:29:17  12  ,ydate6
20:29:17  13  ,ydate8
20:29:17  14  ,clse4
20:29:17  15  ,clse6
20:29:17  16  ,clse8
20:29:17  17  ,(clse4 - clse)/clse npg4
20:29:17  18  ,(clse6 - clse)/clse npg6
20:29:17  19  ,(clse8 - clse)/clse npg8
20:29:17  20  FROM v468hma10
20:29:17  21  ORDER BY ydate
20:29:17  22  /

View created.

Elapsed: 00:00:00.04
20:29:17 SQL> 
20:29:17 SQL> CREATE OR REPLACE VIEW v468hma14 AS
20:29:17   2  SELECT
20:29:17   3  pair
20:29:17   4  ,ydate
20:29:17   5  ,ma4_slope
20:29:17   6  ,ma6_slope
20:29:17   7  ,ma8_slope
20:29:17   8  ,ma9_slope
20:29:17   9  ,ma12_slope
20:29:17  10  ,ma18_slope
20:29:17  11  ,ydate4
20:29:17  12  ,ydate6
20:29:17  13  ,ydate8
20:29:17  14  ,clse4
20:29:17  15  ,clse6
20:29:17  16  ,clse8
20:29:17  17  ,npg4
20:29:17  18  ,npg6
20:29:17  19  ,npg8
20:29:17  20  ,STDDEV(ma4_slope)OVER(PARTITION BY pair)stddev4
20:29:17  21  ,STDDEV(ma6_slope)OVER(PARTITION BY pair)stddev6
20:29:17  22  ,STDDEV(ma8_slope)OVER(PARTITION BY pair)stddev8
20:29:17  23  ,SIGN(ma4_slope)sgn4
20:29:17  24  ,SIGN(ma6_slope)sgn6
20:29:17  25  ,SIGN(ma8_slope)sgn8
20:29:17  26  FROM v468hma12
20:29:17  27  ORDER BY ydate
20:29:17  28  /

View created.

Elapsed: 00:00:00.04
20:29:17 SQL> 
20:29:17 SQL> --rpt
20:29:17 SQL> -- I should see min as the same as max:
20:29:17 SQL> SELECT
20:29:17   2  pair
20:29:17   3  ,MIN(stddev4),MAX(stddev4)
20:29:17   4  ,MIN(stddev6),MAX(stddev6)
20:29:17   5  ,MIN(stddev8),MAX(stddev8)
20:29:17   6  FROM v468hma14
20:29:17   7  GROUP BY pair
20:29:17   8  /

PAIR	MIN(STDDEV4) MAX(STDDEV4) MIN(STDDEV6) MAX(STDDEV6) MIN(STDDEV8) MAX(STDDEV8)
------- ------------ ------------ ------------ ------------ ------------ ------------
eur_usd    .00074895	.00074895   .000655406	 .000655406   .000566021   .000566021
gbp_usd   .000835412   .000835412   .000732251	 .000732251   .000626656   .000626656
gbp_cad   .001208495   .001208495   .001137457	 .001137457   .000923793   .000923793
gbp_jpy   .001605398   .001605398   .001491671	 .001491671   .001222366   .001222366
usd_jpy   .001042706   .001042706   .000967073	 .000967073   .000792034   .000792034
eur_aud   .000769208   .000769208   .000677505	 .000677505   .000579501   .000579501
eur_jpy   .001024001   .001024001    .00089113	  .00089113   .000763416   .000763416
eur_gbp   .000872095   .000872095   .000808895	 .000808895   .000663384   .000663384
gbp_aud   .001384644   .001384644   .001311406	 .001311406    .00106185    .00106185
gbp_chf   .001372507   .001372507    .00130429	  .00130429    .00105223    .00105223
eur_cad   .000688072   .000688072   .000593881	 .000593881   .000518894   .000518894
aud_usd   .001101589   .001101589    .00098848	  .00098848   .000833832   .000833832
usd_cad   .000911651   .000911651   .000822339	 .000822339   .000690807   .000690807
eur_chf    .00056734	.00056734   .000517879	 .000517879    .00043068    .00043068
usd_chf   .000995412   .000995412   .000921583	 .000921583   .000758873   .000758873

15 rows selected.

Elapsed: 00:00:07.33
20:29:25 SQL> 
20:29:25 SQL> -- Look at steep slopes:
20:29:25 SQL> CREATE OR REPLACE VIEW v468hma16 AS
20:29:25   2  SELECT
20:29:25   3  pair
20:29:25   4  ,ydate
20:29:25   5  ,ma4_slope
20:29:25   6  ,ma6_slope
20:29:25   7  ,ma8_slope
20:29:25   8  ,ma9_slope
20:29:25   9  ,ma12_slope
20:29:25  10  ,ma18_slope
20:29:25  11  ,ydate4
20:29:25  12  ,ydate6
20:29:25  13  ,ydate8
20:29:25  14  ,clse4
20:29:25  15  ,clse6
20:29:25  16  ,clse8
20:29:25  17  ,npg4
20:29:25  18  ,npg6
20:29:25  19  ,npg8
20:29:25  20  ,sgn4
20:29:25  21  ,sgn6
20:29:25  22  ,sgn8
20:29:25  23  ,STDDEV(ma4_slope)OVER(PARTITION BY pair)stddev4
20:29:25  24  ,STDDEV(ma6_slope)OVER(PARTITION BY pair)stddev6
20:29:25  25  ,STDDEV(ma8_slope)OVER(PARTITION BY pair)stddev8
20:29:25  26  FROM v468hma14
20:29:25  27  ORDER BY ydate
20:29:25  28  /

View created.

Elapsed: 00:00:00.05
20:29:25 SQL> 
20:29:25 SQL> 
20:29:25 SQL> -- npg4, stddev4:
20:29:25 SQL> SELECT
20:29:25   2  sgn4
20:29:25   3  ,pair
20:29:25   4  ,AVG(npg4)
20:29:25   5  ,CORR(ma4_slope,npg4)crr4
20:29:25   6  ,COUNT(ydate)
20:29:25   7  ,MIN(ydate)
20:29:25   8  ,MAX(ydate)
20:29:25   9  FROM v468hma14
20:29:25  10  WHERE ABS(ma4_slope) > 2.1*stddev4
20:29:25  11  GROUP BY sgn4,pair
20:29:25  12  ORDER BY sgn4,pair
20:29:25  13  /

      SGN4 PAIR     AVG(NPG4)	    CRR4 COUNT(YDATE) MIN(YDATE)	  MAX(YDATE)
---------- ------- ---------- ---------- ------------ ------------------- -------------------
	-1 aud_usd .002800069 -.96474728	  161 2009-01-02 03:00:00 2010-11-18 09:00:00
	-1 eur_aud -.00057082 -.00466514	  193 2009-01-01 02:00:00 2010-11-18 19:00:00
	-1 eur_cad -.00046273 .035975327	  275 2009-01-01 02:00:00 2010-11-24 19:00:00
	-1 eur_chf -.00014103 -.03052366	  134 2009-01-01 19:00:00 2010-11-23 16:00:00
	-1 eur_gbp .002947332 -.97746017	  114 2009-01-01 22:00:00 2010-11-18 09:00:00
	-1 eur_jpy .001320577 -.16244076	  227 2009-01-01 19:00:00 2010-11-23 17:00:00
	-1 eur_usd .000572212 -.84290313	  219 2009-01-02 02:00:00 2010-11-23 17:00:00
	-1 gbp_aud  .00127775 .062584892	   20 2009-01-02 12:00:00 2010-11-18 19:00:00
	-1 gbp_cad .000569105 .045670934	   62 2009-01-01 02:00:00 2010-11-18 19:00:00
	-1 gbp_chf .001444023 .064387169	   31 2009-01-02 10:00:00 2010-11-18 19:00:00
	-1 gbp_jpy .004612628  .00125474	   63 2009-01-09 18:00:00 2010-11-18 19:00:00
	-1 gbp_usd .000196057 -.02121306	  207 2009-01-02 10:00:00 2010-11-18 19:00:00
	-1 usd_cad 6.6157E-06 .031598862	  173 2009-01-01 02:00:00 2010-11-24 16:00:00
	-1 usd_chf -.00030517 -.00678424	   89 2009-01-02 11:00:00 2010-11-18 19:00:00
	-1 usd_jpy .002968368 -.03749441	   63 2009-01-09 18:00:00 2010-11-18 19:00:00
	 1 aud_usd -.00047674 -.01664616	  162 2009-01-02 15:00:00 2010-11-18 19:00:00
	 1 eur_aud -.00084077 -.84225669	  207 2009-01-07 10:00:00 2010-11-18 09:00:00
	 1 eur_cad .000174547 -.64944803	  277 2009-01-01 12:00:00 2010-11-18 09:00:00
	 1 eur_chf  -.0005318 -.84049574	  157 2009-01-01 12:00:00 2010-11-19 14:00:00
	 1 eur_gbp .000256584 .019568403	  120 2009-01-02 09:00:00 2010-11-18 19:00:00
	 1 eur_jpy -.00098681  -.8352662	  171 2009-01-01 11:00:00 2010-11-18 09:00:00
	 1 eur_usd .000151537 -.03864955	  218 2009-01-06 16:00:00 2010-11-18 19:00:00
	 1 gbp_aud -.01585401 -.99632329	   20 2009-01-07 14:00:00 2010-11-18 09:00:00
	 1 gbp_cad -.00523847 -.98944312	   52 2009-01-06 17:00:00 2010-11-18 09:00:00
	 1 gbp_chf -.00833609 -.99058922	   36 2009-01-05 08:00:00 2010-11-18 09:00:00
	 1 gbp_jpy -.00689012 -.98783275	   57 2009-01-05 10:00:00 2010-11-18 09:00:00
	 1 gbp_usd -.00134868  -.8430484	  214 2009-01-02 00:00:00 2010-11-18 09:00:00
	 1 usd_cad -.00137849  -.9613082	  138 2009-01-12 17:00:00 2010-11-18 09:00:00
	 1 usd_chf -.00265137 -.97075506	   88 2009-01-02 05:00:00 2010-11-18 17:00:00
	 1 usd_jpy -.00250627 -.97563448	   76 2009-01-02 19:00:00 2010-11-18 09:00:00

30 rows selected.

Elapsed: 00:00:07.28
20:29:32 SQL> 
20:29:32 SQL> -- npg4, stddev6:
20:29:32 SQL> SELECT
20:29:32   2  sgn6
20:29:32   3  ,pair
20:29:32   4  ,AVG(npg4)
20:29:32   5  ,CORR(ma6_slope,npg4)crr4
20:29:32   6  ,COUNT(ydate)
20:29:32   7  ,MIN(ydate)
20:29:32   8  ,MAX(ydate)
20:29:32   9  FROM v468hma14
20:29:32  10  WHERE ABS(ma6_slope) > 2.1*stddev6
20:29:32  11  GROUP BY sgn6,pair
20:29:32  12  ORDER BY sgn6,pair
20:29:32  13  /

      SGN6 PAIR     AVG(NPG4)	    CRR4 COUNT(YDATE) MIN(YDATE)	  MAX(YDATE)
---------- ------- ---------- ---------- ------------ ------------------- -------------------
	-1 aud_usd .004904152 -.98507148	  117 2009-01-02 05:00:00 2010-11-18 14:00:00
	-1 eur_aud -.00025835 -.03059166	  153 2009-01-01 02:00:00 2010-11-18 21:00:00
	-1 eur_cad .000035531 .022452619	  265 2009-01-01 02:00:00 2010-11-24 21:00:00
	-1 eur_chf -.00012202 -.03993263	  117 2009-01-01 19:00:00 2010-11-23 16:00:00
	-1 eur_gbp .006537295 -.98943809	   91 2009-01-01 22:00:00 2010-11-18 14:00:00
	-1 eur_jpy  .00208278 -.06289325	  200 2009-01-08 11:00:00 2010-11-23 18:00:00
	-1 eur_usd .001207762 -.92794763	  184 2009-01-02 04:00:00 2010-11-23 19:00:00
	-1 gbp_aud -.00091509 -.23097035	    9 2009-01-02 12:00:00 2010-11-18 21:00:00
	-1 gbp_cad .001977213  -.0367225	   25 2009-01-01 02:00:00 2010-11-18 21:00:00
	-1 gbp_chf .002270786 .084297314	   12 2009-01-02 12:00:00 2010-11-18 21:00:00
	-1 gbp_jpy .006871516 .096804369	   36 2009-01-19 13:00:00 2010-11-18 21:00:00
	-1 gbp_usd .000239212 -.04007343	  193 2009-01-02 07:00:00 2010-11-18 21:00:00
	-1 usd_cad   .0008835 -.05784784	  112 2009-01-01 02:00:00 2010-11-18 21:00:00
	-1 usd_chf .000050292 -.06548254	   62 2009-01-07 13:00:00 2010-11-18 21:00:00
	-1 usd_jpy .003328986  .04164529	   54 2009-01-21 15:00:00 2010-11-18 21:00:00
	 1 aud_usd -.00004767 -.06906676	  122 2009-01-02 16:00:00 2010-11-18 21:00:00
	 1 eur_aud -.00170331 -.90457487	  168 2009-01-07 08:00:00 2010-11-18 14:00:00
	 1 eur_cad -.00033717 -.78393347	  266 2009-01-01 13:00:00 2010-11-18 14:00:00
	 1 eur_chf -.00162998 -.91016996	  124 2009-01-01 14:00:00 2010-11-18 20:00:00
	 1 eur_gbp .000104545 -.05307443	   82 2009-01-02 10:00:00 2010-11-18 21:00:00
	 1 eur_jpy -.00201271 -.91064015	  158 2009-01-01 13:00:00 2010-11-18 14:00:00
	 1 eur_usd -.00010713 -.03985415	  197 2009-01-06 18:00:00 2010-11-18 21:00:00
	 1 gbp_aud -.05684539 -.99870122	   11 2009-01-07 15:00:00 2010-11-18 14:00:00
	 1 gbp_cad -.01699855 -.99566698	   34 2009-01-06 20:00:00 2010-11-18 14:00:00
	 1 gbp_chf -.02310006 -.99724183	   25 2009-01-05 08:00:00 2010-11-18 14:00:00
	 1 gbp_jpy -.02128207	-.995817	   37 2009-01-06 19:00:00 2010-11-18 14:00:00
	 1 gbp_usd -.00246845 -.94264677	  165 2009-01-05 18:00:00 2010-11-18 14:00:00
	 1 usd_cad -.00302475 -.98213254	  114 2009-01-07 19:00:00 2010-11-18 14:00:00
	 1 usd_chf -.00649837 -.99162341	   61 2009-01-05 08:00:00 2010-11-18 14:00:00
	 1 usd_jpy -.00779838 -.99357286	   59 2009-01-05 12:00:00 2010-11-18 14:00:00

30 rows selected.

Elapsed: 00:00:07.30
20:29:39 SQL> 
20:29:39 SQL> -- npg4, stddev8:
20:29:39 SQL> SELECT
20:29:39   2  sgn8
20:29:39   3  ,pair
20:29:39   4  ,AVG(npg4)
20:29:39   5  ,CORR(ma8_slope,npg4)crr4
20:29:39   6  ,COUNT(ydate)
20:29:39   7  ,MIN(ydate)
20:29:39   8  ,MAX(ydate)
20:29:39   9  FROM v468hma14
20:29:39  10  WHERE ABS(ma8_slope) > 2.1*stddev8
20:29:39  11  GROUP BY sgn8,pair
20:29:39  12  ORDER BY sgn8,pair
20:29:39  13  /

      SGN8 PAIR     AVG(NPG4)	    CRR4 COUNT(YDATE) MIN(YDATE)	  MAX(YDATE)
---------- ------- ---------- ---------- ------------ ------------------- -------------------
	-1 aud_usd .003645724 -.97880595	  148 2009-01-02 07:00:00 2010-11-18 14:00:00
	-1 eur_aud .000684463 .004956701	  167 2009-01-01 02:00:00 2010-11-18 23:00:00
	-1 eur_cad -1.529E-06 .003982146	  275 2009-01-01 02:00:00 2010-11-24 16:00:00
	-1 eur_chf  -.0001244 .020807331	  130 2009-01-01 21:00:00 2010-11-23 18:00:00
	-1 eur_gbp .005540392 -.98333386	  106 2009-01-01 22:00:00 2010-11-18 14:00:00
	-1 eur_jpy .001703843 -.09001856	  209 2009-01-08 12:00:00 2010-11-23 20:00:00
	-1 eur_usd .000980716 -.92567773	  184 2009-01-02 06:00:00 2010-11-23 21:00:00
	-1 gbp_aud  -.0000143 -.06484735	   14 2009-01-02 14:00:00 2010-11-18 23:00:00
	-1 gbp_cad .000889721 .013517225	   35 2009-01-01 02:00:00 2010-11-18 23:00:00
	-1 gbp_chf -.00038063 .005548159	   19 2009-01-12 16:00:00 2010-11-18 23:00:00
	-1 gbp_jpy .005339813 .079260651	   53 2009-01-12 15:00:00 2010-11-18 23:00:00
	-1 gbp_usd -8.942E-06 .000966703	  191 2009-01-02 09:00:00 2010-11-18 23:00:00
	-1 usd_cad .001006615 -.01686003	  114 2009-01-01 02:00:00 2010-11-18 23:00:00
	-1 usd_chf .000115419 -.01108224	   71 2009-01-07 11:00:00 2010-11-18 23:00:00
	-1 usd_jpy .004139621 .090698648	   60 2009-01-08 12:00:00 2010-11-18 23:00:00
	 1 aud_usd -.00088947  -.0351372	  139 2009-01-02 16:00:00 2010-11-18 23:00:00
	 1 eur_aud -.00081996 -.88706865	  180 2009-01-07 10:00:00 2010-11-18 14:00:00
	 1 eur_cad -.00019098 -.73532208	  276 2009-01-06 21:00:00 2010-11-18 14:00:00
	 1 eur_chf -.00126567 -.90081667	  139 2009-01-02 19:00:00 2010-11-18 22:00:00
	 1 eur_gbp -.00042432 -.02768933	   97 2009-01-02 11:00:00 2010-11-18 23:00:00
	 1 eur_jpy -.00164114 -.89125169	  169 2009-01-14 05:00:00 2010-11-18 14:00:00
	 1 eur_usd -.00005654 -.02130484	  215 2009-01-06 20:00:00 2010-11-18 23:00:00
	 1 gbp_aud -.02494709 -.99789342	   25 2009-01-07 15:00:00 2010-11-18 14:00:00
	 1 gbp_cad -.01242371 -.99748726	   46 2009-01-06 21:00:00 2010-11-18 14:00:00
	 1 gbp_chf -.01552454 -.99625909	   35 2009-01-05 08:00:00 2010-11-18 14:00:00
	 1 gbp_jpy -.01915331 -.99771196	   38 2009-01-22 00:00:00 2010-11-18 14:00:00
	 1 gbp_usd -.00184681 -.93174241	  205 2009-01-05 18:00:00 2010-11-18 14:00:00
	 1 usd_cad -.00267801 -.98342966	  123 2009-01-12 18:00:00 2010-11-18 14:00:00
	 1 usd_chf -.00611846 -.98834464	   69 2009-01-02 20:00:00 2010-11-18 14:00:00
	 1 usd_jpy -.00708638 -.99453173	   64 2009-01-05 12:00:00 2010-11-18 14:00:00

30 rows selected.

Elapsed: 00:00:07.31
20:29:47 SQL> 
20:29:47 SQL> -- npg6, stddev6:
20:29:47 SQL> SELECT
20:29:47   2  sgn6
20:29:47   3  ,pair
20:29:47   4  ,AVG(npg6)
20:29:47   5  ,CORR(ma6_slope,npg6)crr6
20:29:47   6  ,COUNT(ydate)
20:29:47   7  ,MIN(ydate)
20:29:47   8  ,MAX(ydate)
20:29:47   9  FROM v468hma14
20:29:47  10  WHERE ABS(ma6_slope) > 2.1*stddev6
20:29:47  11  GROUP BY sgn6,pair
20:29:47  12  ORDER BY sgn6,pair
20:29:47  13  /

      SGN6 PAIR     AVG(NPG6)	    CRR6 COUNT(YDATE) MIN(YDATE)	  MAX(YDATE)
---------- ------- ---------- ---------- ------------ ------------------- -------------------
	-1 aud_usd .004764526 -.97780267	  117 2009-01-02 05:00:00 2010-11-18 14:00:00
	-1 eur_aud -.00018829 -.04782407	  153 2009-01-01 02:00:00 2010-11-18 21:00:00
	-1 eur_cad  .00011745 .012480979	  265 2009-01-01 02:00:00 2010-11-24 21:00:00
	-1 eur_chf -.00033134 -.03702162	  117 2009-01-01 19:00:00 2010-11-23 16:00:00
	-1 eur_gbp .006236708 -.98515705	   91 2009-01-01 22:00:00 2010-11-18 14:00:00
	-1 eur_jpy .002379495 -.09222266	  200 2009-01-08 11:00:00 2010-11-23 18:00:00
	-1 eur_usd  .00124304 -.91111168	  184 2009-01-02 04:00:00 2010-11-23 19:00:00
	-1 gbp_aud .001105506 -.06373819	    9 2009-01-02 12:00:00 2010-11-18 21:00:00
	-1 gbp_cad .001180538 -.04012128	   25 2009-01-01 02:00:00 2010-11-18 21:00:00
	-1 gbp_chf .002806121 .156810414	   12 2009-01-02 12:00:00 2010-11-18 21:00:00
	-1 gbp_jpy .007838854 .103477194	   36 2009-01-19 13:00:00 2010-11-18 21:00:00
	-1 gbp_usd .000251228 -.02436074	  193 2009-01-02 07:00:00 2010-11-18 21:00:00
	-1 usd_cad .000982152 -.03279851	  112 2009-01-01 02:00:00 2010-11-18 21:00:00
	-1 usd_chf  .00012027 -.03721134	   62 2009-01-07 13:00:00 2010-11-18 21:00:00
	-1 usd_jpy  .00400919 .046782602	   54 2009-01-21 15:00:00 2010-11-18 21:00:00
	 1 aud_usd -.00060575 -.05121965	  122 2009-01-02 16:00:00 2010-11-18 21:00:00
	 1 eur_aud -.00118812 -.87699457	  168 2009-01-07 08:00:00 2010-11-18 14:00:00
	 1 eur_cad -.00009458 -.72410143	  266 2009-01-01 13:00:00 2010-11-18 14:00:00
	 1 eur_chf -.00133421 -.89729278	  124 2009-01-01 14:00:00 2010-11-18 20:00:00
	 1 eur_gbp -.00039116 -.03622635	   82 2009-01-02 10:00:00 2010-11-18 21:00:00
	 1 eur_jpy -.00145111 -.88318668	  158 2009-01-01 13:00:00 2010-11-18 14:00:00
	 1 eur_usd -5.261E-06 -.03249717	  197 2009-01-06 18:00:00 2010-11-18 21:00:00
	 1 gbp_aud -.05578669 -.99894222	   11 2009-01-07 15:00:00 2010-11-18 14:00:00
	 1 gbp_cad  -.0172654 -.99547766	   34 2009-01-06 20:00:00 2010-11-18 14:00:00
	 1 gbp_chf -.02105189 -.99648961	   25 2009-01-05 08:00:00 2010-11-18 14:00:00
	 1 gbp_jpy -.02131141 -.99511565	   37 2009-01-06 19:00:00 2010-11-18 14:00:00
	 1 gbp_usd -.00268984 -.94267443	  165 2009-01-05 18:00:00 2010-11-18 14:00:00
	 1 usd_cad -.00295031 -.97791822	  114 2009-01-07 19:00:00 2010-11-18 14:00:00
	 1 usd_chf -.00625176  -.9914787	   61 2009-01-05 08:00:00 2010-11-18 14:00:00
	 1 usd_jpy -.00761877 -.99267434	   59 2009-01-05 12:00:00 2010-11-18 14:00:00

30 rows selected.

Elapsed: 00:00:07.31
20:29:54 SQL> 
20:29:54 SQL> -- npg6, stddev8:
20:29:54 SQL> SELECT
20:29:54   2  sgn8
20:29:54   3  ,pair
20:29:54   4  ,AVG(npg6)
20:29:54   5  ,CORR(ma8_slope,npg6)crr6
20:29:54   6  ,COUNT(ydate)
20:29:54   7  ,MIN(ydate)
20:29:54   8  ,MAX(ydate)
20:29:54   9  FROM v468hma14
20:29:54  10  WHERE ABS(ma8_slope) > 2.1*stddev8
20:29:54  11  GROUP BY sgn8,pair
20:29:54  12  ORDER BY sgn8,pair
20:29:54  13  /

      SGN8 PAIR     AVG(NPG6)	    CRR6 COUNT(YDATE) MIN(YDATE)	  MAX(YDATE)
---------- ------- ---------- ---------- ------------ ------------------- -------------------
	-1 aud_usd .003857376 -.96945768	  148 2009-01-02 07:00:00 2010-11-18 14:00:00
	-1 eur_aud .000684515 -.03734464	  167 2009-01-01 02:00:00 2010-11-18 23:00:00
	-1 eur_cad -.00006709  -.0365296	  275 2009-01-01 02:00:00 2010-11-24 16:00:00
	-1 eur_chf -.00049025 .046248198	  130 2009-01-01 21:00:00 2010-11-23 18:00:00
	-1 eur_gbp .005451402 -.98002927	  106 2009-01-01 22:00:00 2010-11-18 14:00:00
	-1 eur_jpy .002462333 -.11626413	  209 2009-01-08 12:00:00 2010-11-23 20:00:00
	-1 eur_usd .001288179  -.9105315	  184 2009-01-02 06:00:00 2010-11-23 21:00:00
	-1 gbp_aud .000986217 -.07153114	   14 2009-01-02 14:00:00 2010-11-18 23:00:00
	-1 gbp_cad .000688724 -.01260726	   35 2009-01-01 02:00:00 2010-11-18 23:00:00
	-1 gbp_chf -.00044763 .060433677	   19 2009-01-12 16:00:00 2010-11-18 23:00:00
	-1 gbp_jpy .005486148 .048071477	   53 2009-01-12 15:00:00 2010-11-18 23:00:00
	-1 gbp_usd .000011055 -.00155805	  191 2009-01-02 09:00:00 2010-11-18 23:00:00
	-1 usd_cad .001261811 -.00182154	  114 2009-01-01 02:00:00 2010-11-18 23:00:00
	-1 usd_chf .000012863 .067572289	   71 2009-01-07 11:00:00 2010-11-18 23:00:00
	-1 usd_jpy .004824477 .067724776	   60 2009-01-08 12:00:00 2010-11-18 23:00:00
	 1 aud_usd   -.001518 -.04521503	  139 2009-01-02 16:00:00 2010-11-18 23:00:00
	 1 eur_aud  -.0003424 -.86241796	  180 2009-01-07 10:00:00 2010-11-18 14:00:00
	 1 eur_cad .000011815 -.68910781	  276 2009-01-06 21:00:00 2010-11-18 14:00:00
	 1 eur_chf -.00117322 -.88666275	  139 2009-01-02 19:00:00 2010-11-18 22:00:00
	 1 eur_gbp -.00115898 .003595525	   97 2009-01-02 11:00:00 2010-11-18 23:00:00
	 1 eur_jpy -.00125394 -.87518176	  169 2009-01-14 05:00:00 2010-11-18 14:00:00
	 1 eur_usd -.00014426  -.0028868	  215 2009-01-06 20:00:00 2010-11-18 23:00:00
	 1 gbp_aud -.02530182 -.99745771	   25 2009-01-07 15:00:00 2010-11-18 14:00:00
	 1 gbp_cad  -.0126211 -.99632063	   46 2009-01-06 21:00:00 2010-11-18 14:00:00
	 1 gbp_chf -.01390418 -.99556519	   35 2009-01-05 08:00:00 2010-11-18 14:00:00
	 1 gbp_jpy -.01891127 -.99706028	   38 2009-01-22 00:00:00 2010-11-18 14:00:00
	 1 gbp_usd -.00218568 -.92895179	  205 2009-01-05 18:00:00 2010-11-18 14:00:00
	 1 usd_cad -.00254235 -.97954838	  123 2009-01-12 18:00:00 2010-11-18 14:00:00
	 1 usd_chf -.00579623 -.98808837	   69 2009-01-02 20:00:00 2010-11-18 14:00:00
	 1 usd_jpy -.00721756 -.99313068	   64 2009-01-05 12:00:00 2010-11-18 14:00:00

30 rows selected.

Elapsed: 00:00:07.38
20:30:01 SQL> 
20:30:01 SQL> exit
Disconnected from Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options
