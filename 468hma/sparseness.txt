
SQL*Plus: Release 11.2.0.1.0 Production on Sun Nov 28 08:21:38 2010

Copyright (c) 1982, 2009, Oracle.  All rights reserved.


Connected to:
Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options

08:21:38 SQL> ALTER SESSION SET NLS_DATE_FORMAT = 'YYYY-MM-DD hh24:mi:ss';

Session altered.

Elapsed: 00:00:00.00
08:21:38 SQL> 08:21:38 SQL> --
08:21:38 SQL> -- sparseness.sql
08:21:38 SQL> --
08:21:38 SQL> 
08:21:38 SQL> -- I use this query to help me see the frequency of r2m when ma-slope is very steep.
08:21:38 SQL> 
08:21:38 SQL> SELECT
08:21:38   2  ydate
08:21:38   3  ,pair
08:21:38   4  ,npg4
08:21:38   5  FROM v468hma14
08:21:38   6  WHERE pair IN('aud_usd','eur_gbp')
08:21:38   7  AND sgn4 = -1
08:21:38   8  AND ABS(ma4_slope) > 2.1*stddev4
08:21:38   9  AND ydate > sysdate -66
08:21:38  10  ORDER BY ydate,pair
08:21:38  11  /

YDATE		    PAIR	  NPG4
------------------- ------- ----------
2010-10-04 10:00:00 eur_gbp -.00119568
2010-10-05 05:00:00 aud_usd .001984334
2010-10-05 06:00:00 aud_usd .003241322
2010-10-07 16:00:00 aud_usd  .00224444
2010-10-19 12:00:00 aud_usd -.00388747
2010-10-19 13:00:00 aud_usd .000205867
2010-10-19 14:00:00 aud_usd -.00318897
2010-10-19 15:00:00 aud_usd -.00768758
2010-10-21 17:00:00 aud_usd .003897036
2010-10-26 08:00:00 eur_gbp -.00268817
2010-10-26 09:00:00 eur_gbp -.00464382
2010-10-26 10:00:00 eur_gbp -.00498359
2010-10-26 12:00:00 eur_gbp -.00189618
2010-10-27 02:00:00 aud_usd -.00430416
2010-10-27 03:00:00 aud_usd -.00236528
2010-10-27 04:00:00 aud_usd -.00133539
2010-11-04 15:00:00 eur_gbp -.00195795
2010-11-05 12:00:00 eur_gbp -.00305406
2010-11-05 13:00:00 eur_gbp -.00002533
2010-11-05 14:00:00 eur_gbp  .00020182
2010-11-05 15:00:00 eur_gbp  .00167791
2010-11-09 20:00:00 aud_usd .002591448
2010-11-10 13:00:00 eur_gbp -.00264549
2010-11-10 14:00:00 eur_gbp .001376405
2010-11-11 15:00:00 eur_gbp .001681672
2010-11-12 07:00:00 aud_usd .005889521
2010-11-12 15:00:00 eur_gbp  -.0000156
2010-11-12 16:00:00 eur_gbp  .00167958
2010-11-23 14:00:00 eur_gbp .001206462
2010-11-23 15:00:00 eur_gbp .001388801

30 rows selected.

Elapsed: 00:00:01.01
08:21:39 SQL> 
08:21:39 SQL> SELECT
08:21:39   2  pair
08:21:39   3  ,SUM(npg4)
08:21:39   4  ,AVG(npg4)
08:21:39   5  FROM v468hma14
08:21:39   6  WHERE pair IN('aud_usd','eur_gbp')
08:21:39   7  AND sgn4 = -1
08:21:39   8  AND ABS(ma4_slope) > 2.1*stddev4
08:21:39   9  AND ydate > sysdate -66
08:21:39  10  GROUP BY pair
08:21:39  11  /

PAIR	 SUM(NPG4)  AVG(NPG4)
------- ---------- ----------
eur_gbp -.01389323 -.00081725
aud_usd -.00271488 -.00020884

Elapsed: 00:00:00.99
08:21:40 SQL> 
08:21:40 SQL> SELECT
08:21:40   2  ydate
08:21:40   3  ,AVG(npg4)
08:21:40   4  ,SUM(npg4)
08:21:40   5  ,COUNT(npg4)
08:21:40   6  FROM v468hma14
08:21:40   7  WHERE pair IN
08:21:40   8  ('eur_aud','eur_chf','gbp_aud','gbp_cad','gbp_chf','gbp_jpy','gbp_usd','usd_cad','usd_chf','usd_jpy')
08:21:40   9  AND sgn4 = 1
08:21:40  10  AND ABS(ma4_slope) > 2.1*stddev4
08:21:40  11  AND ydate > sysdate -66
08:21:40  12  GROUP BY ydate
08:21:40  13  ORDER BY ydate
08:21:40  14  /

YDATE		     AVG(NPG4)	SUM(NPG4) COUNT(NPG4)
------------------- ---------- ---------- -----------
2010-09-23 09:00:00 .001007184 .001007184	    1
2010-09-23 10:00:00 -.00027596 -.00027596	    1
2010-09-24 11:00:00 .007287162 .007287162	    1
2010-09-24 12:00:00 .006981817 .006981817	    1
2010-09-24 14:00:00 .002109757 .004219515	    2
2010-09-24 15:00:00 .002801861 .005603722	    2
2010-09-24 16:00:00  -.0008949 -.00178981	    2
2010-09-24 17:00:00 -.00248984 -.00497967	    2
2010-09-24 18:00:00 -.00179674 -.00179674	    1
2010-09-28 11:00:00 -.00858459 -.01716919	    2
2010-09-28 12:00:00 -.00168429 -.00168429	    1
2010-09-29 09:00:00 -.00441885 -.00441885	    1
2010-09-29 10:00:00 -.00251467 -.00251467	    1
2010-09-29 18:00:00 -.00074848 -.00074848	    1
2010-09-30 15:00:00 .001733279 .001733279	    1
2010-09-30 16:00:00 .002939035 .002939035	    1
2010-09-30 17:00:00 .001275425	.00255085	    2
2010-09-30 18:00:00 .000975376 .000975376	    1
2010-10-05 03:00:00 .002548551 .002548551	    1
2010-10-05 04:00:00 .003243148 .006486296	    2
2010-10-05 05:00:00 .002987023 .005974046	    2
2010-10-05 06:00:00 .001178457 .002356914	    2
2010-10-05 07:00:00 -.00165588 -.00331176	    2
2010-10-07 12:00:00 -.00050059 -.00100119	    2
2010-10-07 14:00:00 -.00152496 -.00457487	    3
2010-10-07 15:00:00 -.00136641 -.00409923	    3
2010-10-07 16:00:00 -.00227202 -.00227202	    1
2010-10-07 17:00:00 -.00107981 -.00107981	    1
2010-10-08 10:00:00 -.00661328 -.00661328	    1
2010-10-10 21:00:00 .001354613 .001354613	    1
2010-10-12 08:00:00 -.01255661 -.01255661	    1
2010-10-19 12:00:00 -.00119705 -.00239409	    2
2010-10-19 13:00:00 -.00261905 -.01309527	    5
2010-10-19 14:00:00 -.00304801 -.01524004	    5
2010-10-19 15:00:00 .002412336 .007237007	    3
2010-10-20 15:00:00 .000202216 .000404433	    2
2010-10-20 16:00:00 -.00016593 -.00033187	    2
2010-10-20 17:00:00 .000532143 .000532143	    1
2010-10-20 18:00:00 -.00096013 -.00096013	    1
2010-10-21 17:00:00 -.00339938 -.00339938	    1
2010-10-22 09:00:00 -.00246356 -.00246356	    1
2010-10-22 15:00:00 .002177045 .002177045	    1
2010-10-22 16:00:00 -.00086609 -.00173218	    2
2010-10-22 17:00:00 -.00242072 -.00484145	    2
2010-10-22 18:00:00 .000074396 .000074396	    1
2010-10-26 08:00:00 .003753868 .011261605	    3
2010-10-26 09:00:00 .003918041 .007836082	    2
2010-10-26 10:00:00 .002844133 .014220666	    5
2010-10-26 11:00:00 .000730013 .001460026	    2
2010-10-26 12:00:00 .001328062 .003984185	    3
2010-10-26 13:00:00 .004288477 .008576954	    2
2010-10-26 14:00:00 .000078746 .000236237	    3
2010-10-26 15:00:00 .001834822 .005504466	    3
2010-10-26 16:00:00 -.00007449 -.00022346	    3
2010-10-26 17:00:00  -.0017726	-.0053178	    3
2010-10-27 01:00:00 .000867004 .000867004	    1
2010-10-27 02:00:00  .00251287	.00502574	    2
2010-10-27 03:00:00 .000184171 .000368342	    2
2010-10-27 04:00:00 .000215679 .000431358	    2
2010-10-28 12:00:00 -.00171449 -.00342899	    2
2010-10-28 13:00:00 -.00305631 -.00611261	    2
2010-10-28 17:00:00 -.00130923 -.00130923	    1
2010-11-01 14:00:00 -.00271411 -.00271411	    1
2010-11-03 11:00:00 -.00396481 -.00396481	    1
2010-11-03 12:00:00 -.00475901 -.00475901	    1
2010-11-03 13:00:00 -.00366263 -.00732526	    2
2010-11-03 15:00:00 -.00331695 -.00331695	    1
2010-11-04 12:00:00 -.00196633 -.00196633	    1
2010-11-09 12:00:00 -.00414735 -.00414735	    1
2010-11-09 18:00:00 .001963672 .001963672	    1
2010-11-09 19:00:00 -.00049014 -.00049014	    1
2010-11-09 20:00:00 -.00121819 -.00243639	    2
2010-11-10 08:00:00 .000299399 .000299399	    1
2010-11-10 11:00:00 -.00217322 -.00434644	    2
2010-11-10 12:00:00 .000019777 .000039553	    2
2010-11-10 13:00:00 .001778337 .003556674	    2
2010-11-10 14:00:00  .00093618	.00093618	    1
2010-11-10 15:00:00 -.00785498 -.00785498	    1
2010-11-10 19:00:00 -.00104121 -.00104121	    1
2010-11-11 15:00:00 -.00304735 -.00304735	    1
2010-11-11 17:00:00 -.00133095	-.0026619	    2
2010-11-12 07:00:00  .00160489	.00160489	    1
2010-11-12 08:00:00 -.00079788 -.00079788	    1
2010-11-12 09:00:00 .000856502 .000856502	    1
2010-11-12 10:00:00 .002971231 .002971231	    1
2010-11-12 12:00:00 .000752285 .000752285	    1
2010-11-12 13:00:00 -.00184566 -.00184566	    1
2010-11-12 14:00:00 -.00016767 -.00067068	    4
2010-11-12 15:00:00 .001383549 .002767099	    2
2010-11-12 16:00:00  .00225462	.00225462	    1
2010-11-12 17:00:00   -.001054	 -.001054	    1
2010-11-15 06:00:00 -.00172817 -.00172817	    1
2010-11-16 14:00:00 .001962709 .001962709	    1
2010-11-16 15:00:00 -.00185728 -.00185728	    1
2010-11-16 16:00:00 .003829487 .003829487	    1
2010-11-16 17:00:00  -.0005302 -.00106039	    2
2010-11-16 18:00:00   .0019107	 .0019107	    1
2010-11-16 19:00:00 .000602591 .000602591	    1
2010-11-16 20:00:00 .000903524 .000903524	    1
2010-11-18 15:00:00 .004424083 .008848165	    2
2010-11-18 16:00:00  .00134002 .004020059	    3
2010-11-18 17:00:00 -.00142181 -.00426544	    3
2010-11-18 18:00:00 -.00040796 -.00122389	    3
2010-11-18 19:00:00 -.00020211 -.00060634	    3
2010-11-19 14:00:00 -.00243817 -.00487634	    2
2010-11-19 15:00:00 -.00390343 -.00780686	    2
2010-11-19 16:00:00 -.00601263 -.00601263	    1
2010-11-22 01:00:00 .000398934 .000398934	    1
2010-11-26 11:00:00 -.00264136 -.00264136	    1
2010-11-26 13:00:00 -.00273946 -.00273946	    1

110 rows selected.

Elapsed: 00:00:04.97
08:21:45 SQL> 
08:21:45 SQL> SELECT
08:21:45   2  pair
08:21:45   3  ,SUM(npg4)
08:21:45   4  ,AVG(npg4)
08:21:45   5  FROM v468hma14
08:21:45   6  WHERE pair IN
08:21:45   7  ('eur_aud','eur_chf','gbp_aud','gbp_cad','gbp_chf','gbp_jpy','gbp_usd','usd_cad','usd_chf','usd_jpy')
08:21:45   8  AND sgn4 = 1
08:21:45   9  AND ABS(ma4_slope) > 2.1*stddev4
08:21:45  10  AND ydate > sysdate -66
08:21:45  11  GROUP BY pair
08:21:45  12  ORDER BY pair
08:21:45  13  /

PAIR	 SUM(NPG4)  AVG(NPG4)
------- ---------- ----------
eur_aud .008718173 .000726514
eur_chf -.01104684 -.00022094
gbp_aud .017234504 .000662866
gbp_cad -.00185385 -.00030898
gbp_chf -.00233172 -.00008328
gbp_jpy -.00010786 -.00002157
gbp_usd -.00993739 -.00124217
usd_cad -.01075362  -.0009776
usd_chf -.03678398 -.00111467
usd_jpy -.01143818 -.00163403

10 rows selected.

Elapsed: 00:00:04.94
08:21:50 SQL> 
08:21:50 SQL> SELECT
08:21:50   2  SUM(npg4)
08:21:50   3  ,AVG(npg4)
08:21:50   4  FROM v468hma14
08:21:50   5  WHERE pair IN
08:21:50   6  ('eur_aud','eur_chf','gbp_aud','gbp_cad','gbp_chf','gbp_jpy','gbp_usd','usd_cad','usd_chf','usd_jpy')
08:21:50   7  AND sgn4 = 1
08:21:50   8  AND ABS(ma4_slope) > 2.1*stddev4
08:21:50   9  AND ydate > sysdate -66
08:21:50  10  /

 SUM(NPG4)  AVG(NPG4)
---------- ----------
-.05830076 -.00031344

Elapsed: 00:00:04.87
08:21:55 SQL> 
08:21:55 SQL> exit
Disconnected from Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options
