
SQL*Plus: Release 11.2.0.1.0 Production on Thu Jan 6 20:39:26 2011

Copyright (c) 1982, 2009, Oracle.  All rights reserved.


Connected to:
Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options

20:39:27 SQL> ALTER SESSION SET NLS_DATE_FORMAT = 'YYYY-MM-DD hh24:mi:ss';

Session altered.

Elapsed: 00:00:00.00
20:39:27 SQL> 20:39:27 SQL> @aud_score1day.sql  2011-01-06 20:15:00
20:39:27 SQL> --
20:39:27 SQL> -- aud_score1day.sql
20:39:27 SQL> --
20:39:27 SQL> 
20:39:27 SQL> CREATE OR REPLACE VIEW sme AS
20:39:27   2  SELECT
20:39:27   3  'aud'||m.ydate prdate
20:39:27   4  ,NULL gatt
20:39:27   5  ,m.ydate - TO_DATE('2000-01-01','YYYY-MM-DD')daycount
20:39:27   6  ,eur_g00
20:39:27   7  ,eur_g01
20:39:27   8  ,eur_g02
20:39:27   9  ,eur_g03
20:39:27  10  ,eur_g04
20:39:27  11  ,eur_g05
20:39:27  12  ,eur_g06
20:39:27  13  ,eur_g07
20:39:27  14  ,eur_g08
20:39:27  15  ,eur_g09
20:39:27  16  ,eur_g10
20:39:27  17  ,eur_g11
20:39:27  18  ,eur_g12
20:39:27  19  ,eur_g13
20:39:27  20  ,eur_g14
20:39:27  21  ,eur_g15
20:39:27  22  ,eur_g16
20:39:27  23  ,eur_g17
20:39:27  24  ,eur_g18
20:39:27  25  ,eur_g19
20:39:27  26  ,eur_g20
20:39:27  27  ,eur_g21
20:39:27  28  ,eur_g22
20:39:27  29  ,eur_g23
20:39:27  30  ,eur_g24
20:39:27  31  ,eur_g25
20:39:27  32  ,eur_g26
20:39:27  33  ,eur_g27
20:39:27  34  ,eur_g28
20:39:27  35  ,eur_g29
20:39:27  36  ,eur_g30
20:39:27  37  ,eur_g31
20:39:27  38  ,eur_g32
20:39:27  39  ,eur_g33
20:39:27  40  ,eur_g34
20:39:27  41  ,eur_g35
20:39:27  42  ,eur_g36
20:39:27  43  ,eur_g37
20:39:27  44  ,eur_g38
20:39:27  45  ,eur_g39
20:39:27  46  ,eur_g40
20:39:27  47  ,eur_g41
20:39:27  48  ,aud_g00
20:39:27  49  ,aud_g01
20:39:27  50  ,aud_g02
20:39:27  51  ,aud_g03
20:39:27  52  ,aud_g04
20:39:27  53  ,aud_g05
20:39:27  54  ,aud_g06
20:39:27  55  ,aud_g07
20:39:27  56  ,aud_g08
20:39:27  57  ,aud_g09
20:39:27  58  ,aud_g10
20:39:27  59  ,aud_g11
20:39:27  60  ,aud_g12
20:39:27  61  ,aud_g13
20:39:27  62  ,aud_g14
20:39:27  63  ,aud_g15
20:39:27  64  ,aud_g16
20:39:27  65  ,aud_g17
20:39:27  66  ,aud_g18
20:39:27  67  ,aud_g19
20:39:27  68  ,aud_g20
20:39:27  69  ,aud_g21
20:39:27  70  ,aud_g22
20:39:27  71  ,aud_g23
20:39:27  72  ,aud_g24
20:39:27  73  ,aud_g25
20:39:27  74  ,aud_g26
20:39:27  75  ,aud_g27
20:39:27  76  ,aud_g28
20:39:27  77  ,aud_g29
20:39:27  78  ,aud_g30
20:39:27  79  ,aud_g31
20:39:27  80  ,aud_g32
20:39:27  81  ,aud_g33
20:39:27  82  ,aud_g34
20:39:27  83  ,aud_g35
20:39:27  84  ,aud_g36
20:39:27  85  ,aud_g37
20:39:27  86  ,aud_g38
20:39:27  87  ,aud_g39
20:39:27  88  ,aud_g40
20:39:27  89  ,aud_g41
20:39:27  90  ,gbp_g00
20:39:27  91  ,gbp_g01
20:39:27  92  ,gbp_g02
20:39:27  93  ,gbp_g03
20:39:27  94  ,gbp_g04
20:39:27  95  ,gbp_g05
20:39:27  96  ,gbp_g06
20:39:27  97  ,gbp_g07
20:39:27  98  ,gbp_g08
20:39:27  99  ,gbp_g09
20:39:27 100  ,gbp_g10
20:39:27 101  ,gbp_g11
20:39:27 102  ,gbp_g12
20:39:27 103  ,gbp_g13
20:39:27 104  ,gbp_g14
20:39:27 105  ,gbp_g15
20:39:27 106  ,gbp_g16
20:39:27 107  ,gbp_g17
20:39:27 108  ,gbp_g18
20:39:27 109  ,gbp_g19
20:39:27 110  ,gbp_g20
20:39:27 111  ,gbp_g21
20:39:27 112  ,gbp_g22
20:39:27 113  ,gbp_g23
20:39:27 114  ,gbp_g24
20:39:27 115  ,gbp_g25
20:39:27 116  ,gbp_g26
20:39:27 117  ,gbp_g27
20:39:27 118  ,gbp_g28
20:39:27 119  ,gbp_g29
20:39:27 120  ,gbp_g30
20:39:27 121  ,gbp_g31
20:39:27 122  ,gbp_g32
20:39:27 123  ,gbp_g33
20:39:27 124  ,gbp_g34
20:39:27 125  ,gbp_g35
20:39:27 126  ,gbp_g36
20:39:27 127  ,gbp_g37
20:39:27 128  ,gbp_g38
20:39:27 129  ,gbp_g39
20:39:27 130  ,gbp_g40
20:39:27 131  ,gbp_g41
20:39:27 132  ,jpy_g00
20:39:27 133  ,jpy_g01
20:39:27 134  ,jpy_g02
20:39:27 135  ,jpy_g03
20:39:27 136  ,jpy_g04
20:39:27 137  ,jpy_g05
20:39:27 138  ,jpy_g06
20:39:27 139  ,jpy_g07
20:39:27 140  ,jpy_g08
20:39:27 141  ,jpy_g09
20:39:27 142  ,jpy_g10
20:39:27 143  ,jpy_g11
20:39:27 144  ,jpy_g12
20:39:27 145  ,jpy_g13
20:39:27 146  ,jpy_g14
20:39:27 147  ,jpy_g15
20:39:27 148  ,jpy_g16
20:39:27 149  ,jpy_g17
20:39:27 150  ,jpy_g18
20:39:27 151  ,jpy_g19
20:39:27 152  ,jpy_g20
20:39:27 153  ,jpy_g21
20:39:27 154  ,jpy_g22
20:39:27 155  ,jpy_g23
20:39:27 156  ,jpy_g24
20:39:27 157  ,jpy_g25
20:39:27 158  ,jpy_g26
20:39:27 159  ,jpy_g27
20:39:27 160  ,jpy_g28
20:39:27 161  ,jpy_g29
20:39:27 162  ,jpy_g30
20:39:27 163  ,jpy_g31
20:39:27 164  ,jpy_g32
20:39:27 165  ,jpy_g33
20:39:27 166  ,jpy_g34
20:39:27 167  ,jpy_g35
20:39:27 168  ,jpy_g36
20:39:27 169  ,jpy_g37
20:39:27 170  ,jpy_g38
20:39:27 171  ,jpy_g39
20:39:27 172  ,jpy_g40
20:39:27 173  ,jpy_g41
20:39:27 174  ,cad_g00
20:39:27 175  ,cad_g01
20:39:27 176  ,cad_g02
20:39:27 177  ,cad_g03
20:39:27 178  ,cad_g04
20:39:27 179  ,cad_g05
20:39:27 180  ,cad_g06
20:39:27 181  ,cad_g07
20:39:27 182  ,cad_g08
20:39:27 183  ,cad_g09
20:39:27 184  ,cad_g10
20:39:27 185  ,cad_g11
20:39:27 186  ,cad_g12
20:39:27 187  ,cad_g13
20:39:27 188  ,cad_g14
20:39:27 189  ,cad_g15
20:39:27 190  ,cad_g16
20:39:27 191  ,cad_g17
20:39:27 192  ,cad_g18
20:39:27 193  ,cad_g19
20:39:27 194  ,cad_g20
20:39:27 195  ,cad_g21
20:39:27 196  ,cad_g22
20:39:27 197  ,cad_g23
20:39:27 198  ,cad_g24
20:39:27 199  ,cad_g25
20:39:27 200  ,cad_g26
20:39:27 201  ,cad_g27
20:39:27 202  ,cad_g28
20:39:27 203  ,cad_g29
20:39:27 204  ,cad_g30
20:39:27 205  ,cad_g31
20:39:27 206  ,cad_g32
20:39:27 207  ,cad_g33
20:39:27 208  ,cad_g34
20:39:27 209  ,cad_g35
20:39:27 210  ,cad_g36
20:39:27 211  ,cad_g37
20:39:27 212  ,cad_g38
20:39:27 213  ,cad_g39
20:39:27 214  ,cad_g40
20:39:27 215  ,cad_g41
20:39:27 216  ,chf_g00
20:39:27 217  ,chf_g01
20:39:27 218  ,chf_g02
20:39:27 219  ,chf_g03
20:39:27 220  ,chf_g04
20:39:27 221  ,chf_g05
20:39:27 222  ,chf_g06
20:39:27 223  ,chf_g07
20:39:27 224  ,chf_g08
20:39:27 225  ,chf_g09
20:39:27 226  ,chf_g10
20:39:27 227  ,chf_g11
20:39:27 228  ,chf_g12
20:39:27 229  ,chf_g13
20:39:27 230  ,chf_g14
20:39:27 231  ,chf_g15
20:39:27 232  ,chf_g16
20:39:27 233  ,chf_g17
20:39:27 234  ,chf_g18
20:39:27 235  ,chf_g19
20:39:27 236  ,chf_g20
20:39:27 237  ,chf_g21
20:39:27 238  ,chf_g22
20:39:27 239  ,chf_g23
20:39:27 240  ,chf_g24
20:39:27 241  ,chf_g25
20:39:27 242  ,chf_g26
20:39:27 243  ,chf_g27
20:39:27 244  ,chf_g28
20:39:27 245  ,chf_g29
20:39:27 246  ,chf_g30
20:39:27 247  ,chf_g31
20:39:27 248  ,chf_g32
20:39:27 249  ,chf_g33
20:39:27 250  ,chf_g34
20:39:27 251  ,chf_g35
20:39:27 252  ,chf_g36
20:39:27 253  ,chf_g37
20:39:27 254  ,chf_g38
20:39:27 255  ,chf_g39
20:39:27 256  ,chf_g40
20:39:27 257  ,chf_g41
20:39:27 258  FROM aud_ms6 m
20:39:27 259  WHERE m.ydate = '&1'||' '||'&2'
20:39:27 260  /
old 259: WHERE m.ydate = '&1'||' '||'&2'
new 259: WHERE m.ydate = '2011-01-06'||' '||'20:15:00'

View created.

Elapsed: 00:00:00.13
20:39:27 SQL> 
20:39:27 SQL> -- rpt
20:39:27 SQL> -- We should see just 1 row:
20:39:27 SQL> 
20:39:27 SQL> SELECT COUNT(prdate) FROM sme
20:39:27   2  
20:39:27 SQL> -- Build the model:
20:39:27 SQL> CREATE OR REPLACE VIEW bme AS
20:39:27   2  SELECT
20:39:27   3  'aud'||m.ydate prdate
20:39:27   4  ,gatt
20:39:27   5  ,m.ydate - TO_DATE('2000-01-01','YYYY-MM-DD')daycount
20:39:27   6  ,eur_g00
20:39:27   7  ,eur_g01
20:39:27   8  ,eur_g02
20:39:27   9  ,eur_g03
20:39:27  10  ,eur_g04
20:39:27  11  ,eur_g05
20:39:27  12  ,eur_g06
20:39:27  13  ,eur_g07
20:39:27  14  ,eur_g08
20:39:27  15  ,eur_g09
20:39:27  16  ,eur_g10
20:39:27  17  ,eur_g11
20:39:27  18  ,eur_g12
20:39:27  19  ,eur_g13
20:39:27  20  ,eur_g14
20:39:27  21  ,eur_g15
20:39:27  22  ,eur_g16
20:39:27  23  ,eur_g17
20:39:27  24  ,eur_g18
20:39:27  25  ,eur_g19
20:39:27  26  ,eur_g20
20:39:27  27  ,eur_g21
20:39:27  28  ,eur_g22
20:39:27  29  ,eur_g23
20:39:27  30  ,eur_g24
20:39:27  31  ,eur_g25
20:39:27  32  ,eur_g26
20:39:27  33  ,eur_g27
20:39:27  34  ,eur_g28
20:39:27  35  ,eur_g29
20:39:27  36  ,eur_g30
20:39:27  37  ,eur_g31
20:39:27  38  ,eur_g32
20:39:27  39  ,eur_g33
20:39:27  40  ,eur_g34
20:39:27  41  ,eur_g35
20:39:27  42  ,eur_g36
20:39:27  43  ,eur_g37
20:39:27  44  ,eur_g38
20:39:27  45  ,eur_g39
20:39:27  46  ,eur_g40
20:39:27  47  ,eur_g41
20:39:27  48  ,aud_g00
20:39:27  49  ,aud_g01
20:39:27  50  ,aud_g02
20:39:27  51  ,aud_g03
20:39:27  52  ,aud_g04
20:39:27  53  ,aud_g05
20:39:27  54  ,aud_g06
20:39:27  55  ,aud_g07
20:39:27  56  ,aud_g08
20:39:27  57  ,aud_g09
20:39:27  58  ,aud_g10
20:39:27  59  ,aud_g11
20:39:27  60  ,aud_g12
20:39:27  61  ,aud_g13
20:39:27  62  ,aud_g14
20:39:27  63  ,aud_g15
20:39:27  64  ,aud_g16
20:39:27  65  ,aud_g17
20:39:27  66  ,aud_g18
20:39:27  67  ,aud_g19
20:39:27  68  ,aud_g20
20:39:27  69  ,aud_g21
20:39:27  70  ,aud_g22
20:39:27  71  ,aud_g23
20:39:27  72  ,aud_g24
20:39:27  73  ,aud_g25
20:39:27  74  ,aud_g26
20:39:27  75  ,aud_g27
20:39:27  76  ,aud_g28
20:39:27  77  ,aud_g29
20:39:27  78  ,aud_g30
20:39:27  79  ,aud_g31
20:39:27  80  ,aud_g32
20:39:27  81  ,aud_g33
20:39:27  82  ,aud_g34
20:39:27  83  ,aud_g35
20:39:27  84  ,aud_g36
20:39:27  85  ,aud_g37
20:39:27  86  ,aud_g38
20:39:27  87  ,aud_g39
20:39:27  88  ,aud_g40
20:39:27  89  ,aud_g41
20:39:27  90  ,gbp_g00
20:39:27  91  ,gbp_g01
20:39:27  92  ,gbp_g02
20:39:27  93  ,gbp_g03
20:39:27  94  ,gbp_g04
20:39:27  95  ,gbp_g05
20:39:27  96  ,gbp_g06
20:39:27  97  ,gbp_g07
20:39:27  98  ,gbp_g08
20:39:27  99  ,gbp_g09
20:39:27 100  ,gbp_g10
20:39:27 101  ,gbp_g11
20:39:27 102  ,gbp_g12
20:39:27 103  ,gbp_g13
20:39:27 104  ,gbp_g14
20:39:27 105  ,gbp_g15
20:39:27 106  ,gbp_g16
20:39:27 107  ,gbp_g17
20:39:27 108  ,gbp_g18
20:39:27 109  ,gbp_g19
20:39:27 110  ,gbp_g20
20:39:27 111  ,gbp_g21
20:39:27 112  ,gbp_g22
20:39:27 113  ,gbp_g23
20:39:27 114  ,gbp_g24
20:39:27 115  ,gbp_g25
20:39:27 116  ,gbp_g26
20:39:27 117  ,gbp_g27
20:39:27 118  ,gbp_g28
20:39:27 119  ,gbp_g29
20:39:27 120  ,gbp_g30
20:39:27 121  ,gbp_g31
20:39:27 122  ,gbp_g32
20:39:27 123  ,gbp_g33
20:39:27 124  ,gbp_g34
20:39:27 125  ,gbp_g35
20:39:27 126  ,gbp_g36
20:39:27 127  ,gbp_g37
20:39:27 128  ,gbp_g38
20:39:27 129  ,gbp_g39
20:39:27 130  ,gbp_g40
20:39:27 131  ,gbp_g41
20:39:27 132  ,jpy_g00
20:39:27 133  ,jpy_g01
20:39:27 134  ,jpy_g02
20:39:27 135  ,jpy_g03
20:39:27 136  ,jpy_g04
20:39:27 137  ,jpy_g05
20:39:27 138  ,jpy_g06
20:39:27 139  ,jpy_g07
20:39:27 140  ,jpy_g08
20:39:27 141  ,jpy_g09
20:39:27 142  ,jpy_g10
20:39:27 143  ,jpy_g11
20:39:27 144  ,jpy_g12
20:39:27 145  ,jpy_g13
20:39:27 146  ,jpy_g14
20:39:27 147  ,jpy_g15
20:39:27 148  ,jpy_g16
20:39:27 149  ,jpy_g17
20:39:27 150  ,jpy_g18
20:39:27 151  ,jpy_g19
20:39:27 152  ,jpy_g20
20:39:27 153  ,jpy_g21
20:39:27 154  ,jpy_g22
20:39:27 155  ,jpy_g23
20:39:27 156  ,jpy_g24
20:39:27 157  ,jpy_g25
20:39:27 158  ,jpy_g26
20:39:27 159  ,jpy_g27
20:39:27 160  ,jpy_g28
20:39:27 161  ,jpy_g29
20:39:27 162  ,jpy_g30
20:39:27 163  ,jpy_g31
20:39:27 164  ,jpy_g32
20:39:27 165  ,jpy_g33
20:39:27 166  ,jpy_g34
20:39:27 167  ,jpy_g35
20:39:27 168  ,jpy_g36
20:39:27 169  ,jpy_g37
20:39:27 170  ,jpy_g38
20:39:27 171  ,jpy_g39
20:39:27 172  ,jpy_g40
20:39:27 173  ,jpy_g41
20:39:27 174  ,cad_g00
20:39:27 175  ,cad_g01
20:39:27 176  ,cad_g02
20:39:27 177  ,cad_g03
20:39:27 178  ,cad_g04
20:39:27 179  ,cad_g05
20:39:27 180  ,cad_g06
20:39:27 181  ,cad_g07
20:39:27 182  ,cad_g08
20:39:27 183  ,cad_g09
20:39:27 184  ,cad_g10
20:39:27 185  ,cad_g11
20:39:27 186  ,cad_g12
20:39:27 187  ,cad_g13
20:39:27 188  ,cad_g14
20:39:27 189  ,cad_g15
20:39:27 190  ,cad_g16
20:39:27 191  ,cad_g17
20:39:27 192  ,cad_g18
20:39:27 193  ,cad_g19
20:39:27 194  ,cad_g20
20:39:27 195  ,cad_g21
20:39:27 196  ,cad_g22
20:39:27 197  ,cad_g23
20:39:27 198  ,cad_g24
20:39:27 199  ,cad_g25
20:39:27 200  ,cad_g26
20:39:27 201  ,cad_g27
20:39:27 202  ,cad_g28
20:39:27 203  ,cad_g29
20:39:27 204  ,cad_g30
20:39:27 205  ,cad_g31
20:39:27 206  ,cad_g32
20:39:27 207  ,cad_g33
20:39:27 208  ,cad_g34
20:39:27 209  ,cad_g35
20:39:27 210  ,cad_g36
20:39:27 211  ,cad_g37
20:39:27 212  ,cad_g38
20:39:27 213  ,cad_g39
20:39:27 214  ,cad_g40
20:39:27 215  ,cad_g41
20:39:27 216  ,chf_g00
20:39:27 217  ,chf_g01
20:39:27 218  ,chf_g02
20:39:27 219  ,chf_g03
20:39:27 220  ,chf_g04
20:39:27 221  ,chf_g05
20:39:27 222  ,chf_g06
20:39:27 223  ,chf_g07
20:39:27 224  ,chf_g08
20:39:27 225  ,chf_g09
20:39:27 226  ,chf_g10
20:39:27 227  ,chf_g11
20:39:27 228  ,chf_g12
20:39:27 229  ,chf_g13
20:39:27 230  ,chf_g14
20:39:27 231  ,chf_g15
20:39:27 232  ,chf_g16
20:39:27 233  ,chf_g17
20:39:27 234  ,chf_g18
20:39:27 235  ,chf_g19
20:39:27 236  ,chf_g20
20:39:27 237  ,chf_g21
20:39:27 238  ,chf_g22
20:39:27 239  ,chf_g23
20:39:27 240  ,chf_g24
20:39:27 241  ,chf_g25
20:39:27 242  ,chf_g26
20:39:27 243  ,chf_g27
20:39:27 244  ,chf_g28
20:39:27 245  ,chf_g29
20:39:27 246  ,chf_g30
20:39:27 247  ,chf_g31
20:39:27 248  ,chf_g32
20:39:27 249  ,chf_g33
20:39:27 250  ,chf_g34
20:39:27 251  ,chf_g35
20:39:27 252  ,chf_g36
20:39:27 253  ,chf_g37
20:39:27 254  ,chf_g38
20:39:27 255  ,chf_g39
20:39:27 256  ,chf_g40
20:39:27 257  ,chf_g41
20:39:27 258  FROM aud_ms6 m
20:39:27 259  WHERE gatt IN('nup','up')
20:39:27 260  AND 1+m.ydate < '&1'||' '||'&2'
20:39:27 261  /
old 260: AND 1+m.ydate < '&1'||' '||'&2'
new 260: AND 1+m.ydate < '2011-01-06'||' '||'20:15:00'

View created.

Elapsed: 00:00:00.15
20:39:27 SQL> 
20:39:27 SQL> -- rpt
20:39:27 SQL> 
20:39:27 SQL> SELECT gatt, COUNT(prdate) FROM bme GROUP BY gatt
20:39:27   2  
20:39:27 SQL> SELECT MAX(prdate) FROM bme
20:39:27   2  
20:39:27 SQL> -- Now build model from bme and score sme
20:39:27 SQL> @score1.sql
20:39:27 SQL> -- score1.sql
20:39:27 SQL> 
20:39:27 SQL> -- Does the 1st SVM score
20:39:27 SQL> 
20:39:27 SQL> -- Fill up svmc_apply_prep
20:39:27 SQL> @score.sql
20:39:27 SQL> --
20:39:27 SQL> -- score.sql
20:39:27 SQL> --
20:39:27 SQL> 
20:39:27 SQL> -- usage: score.sql
20:39:27 SQL> 
20:39:27 SQL> -- A script which feeds data to SVM and captures the results in table svmc_apply_prep
20:39:27 SQL> 
20:39:27 SQL> DEFINE target	= 'gatt'
20:39:27 SQL> DEFINE model_name = 'forex15'
20:39:27 SQL> DEFINE bldtable	= 'bme'
20:39:27 SQL> DEFINE scoretable = 'sme'
20:39:27 SQL> DEFINE case_id	= 'prdate'
20:39:27 SQL> 
20:39:27 SQL> -- Define a variable to help me exclude some columns from some data mining calls
20:39:27 SQL> DEFINE exclude1 = "'&target','&case_id'"
20:39:27 SQL> 
20:39:27 SQL> -- Builds an SVM model using pl/sql.
20:39:27 SQL> 
20:39:27 SQL> -----------------------------------------------------------------------
20:39:27 SQL> --			    BUILD THE MODEL
20:39:27 SQL> -----------------------------------------------------------------------
20:39:27 SQL> 
20:39:27 SQL> -- Cleanup old build data preparation objects for repeat runs
20:39:27 SQL> DELETE svmc_miss_num;

253 rows deleted.

Elapsed: 00:00:00.01
20:39:27 SQL> DELETE svmc_miss_cat;

0 rows deleted.

Elapsed: 00:00:00.00
20:39:27 SQL> DELETE svmc_clip;

253 rows deleted.

Elapsed: 00:00:00.01
20:39:27 SQL> DELETE svmc_norm;

253 rows deleted.

Elapsed: 00:00:00.01
20:39:27 SQL> 
20:39:27 SQL> 
20:39:27 SQL> -- CREATE AND POPULATE A SETTINGS TABLE
20:39:27 SQL> --
20:39:27 SQL> -- DROP	TABLE svmc_settings ;
20:39:27 SQL> -- CREATE TABLE svmc_settings ( setting_name  VARCHAR2(30), setting_value VARCHAR2(30));
20:39:27 SQL> -- DELETE svmc_settings;
20:39:27 SQL> 
20:39:27 SQL> -- The default classification algorithm is Naive Bayes. So override
20:39:27 SQL> -- this choice to SVM using a settings table.
20:39:27 SQL> -- SVM chooses a kernel type automatically. This choice can be overriden
20:39:27 SQL> -- by the user. Linear kernel is preferred high dimensional data, and
20:39:27 SQL> -- Gaussian kernel for low dimensional data. Here we use linear kernel
20:39:27 SQL> -- to demonstrate the get_model_details_svm() API, which applies only for
20:39:27 SQL> -- models.
20:39:27 SQL> --
20:39:27 SQL> 
20:39:27 SQL> -- Do this once and then comment it out.
20:39:27 SQL> -- That makes script go faster.
20:39:27 SQL> -- BEGIN
20:39:27 SQL> -- -- Populate settings table
20:39:27 SQL> --   INSERT INTO svmc_settings (setting_name, setting_value) VALUES
20:39:27 SQL> --   (dbms_data_mining.algo_name, dbms_data_mining.algo_support_vector_machines);
20:39:27 SQL> --
20:39:27 SQL> --   INSERT INTO svmc_settings (setting_name, setting_value) VALUES
20:39:27 SQL> --   (dbms_data_mining.svms_kernel_function, dbms_data_mining.svms_gaussian);
20:39:27 SQL> --
20:39:27 SQL> --   INSERT INTO svmc_settings (setting_name, setting_value) VALUES
20:39:27 SQL> --   (dbms_data_mining.svms_kernel_cache_size,190123123);
20:39:27 SQL> --   COMMIT;
20:39:27 SQL> -- END;
20:39:27 SQL> -- /
20:39:27 SQL> 
20:39:27 SQL> SELECT * FROM svmc_settings;

SETTING_NAME		       SETTING_VALUE
------------------------------ ------------------------------
ALGO_NAME		       ALGO_SUPPORT_VECTOR_MACHINES
SVMS_KERNEL_FUNCTION	       SVMS_GAUSSIAN
SVMS_KERNEL_CACHE_SIZE	       320123123

Elapsed: 00:00:00.00
20:39:27 SQL> 
20:39:27 SQL> BEGIN EXECUTE IMMEDIATE 'DROP VIEW svmc_winsor';
20:39:27   2  EXCEPTION WHEN OTHERS THEN NULL; END;
20:39:27   3  /

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.11
20:39:27 SQL> BEGIN EXECUTE IMMEDIATE 'DROP VIEW svmc_build_prep';
20:39:27   2  EXCEPTION WHEN OTHERS THEN NULL; END;
20:39:27   3  /

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.06
20:39:27 SQL> BEGIN EXECUTE IMMEDIATE 'DROP VIEW xformed_build_miss_num';
20:39:27   2  EXCEPTION WHEN OTHERS THEN NULL; END;
20:39:27   3  /

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.06
20:39:27 SQL> 
20:39:27 SQL> BEGIN EXECUTE IMMEDIATE 'DROP VIEW xformed_build_miss_cat';
20:39:27   2  EXCEPTION WHEN OTHERS THEN NULL; END;
20:39:27   3  /

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.08
20:39:27 SQL> 
20:39:27 SQL> --------------------------------
20:39:27 SQL> -- PREPARE BUILD (TRAINING) DATA
20:39:27 SQL> --
20:39:27 SQL> 
20:39:27 SQL> -- 1. Missing Value treatment for all Predictors and
20:39:27 SQL> -- 2. Outlier Treatment and
20:39:27 SQL> -- 3. Normalization are performed below.
20:39:27 SQL> --    NOTE: that unlike SVM regression, the classification target is NOT
20:39:27 SQL> --    normalized here.
20:39:27 SQL> 
20:39:27 SQL> BEGIN
20:39:27   2  	-- Perform missing value treatment for all predictors
20:39:27   3  	-- create miss tables
20:39:27   4  	--  DBMS_DATA_MINING_TRANSFORM.CREATE_MISS_NUM (miss_table_name => 'svmc_miss_num');
20:39:27   5  	--  DBMS_DATA_MINING_TRANSFORM.CREATE_MISS_CAT (miss_table_name => 'svmc_miss_cat');
20:39:27   6  
20:39:27   7  	-- populate miss tables
20:39:27   8  	DBMS_DATA_MINING_TRANSFORM.INSERT_MISS_NUM_MEAN (
20:39:27   9  	  miss_table_name => 'svmc_miss_num',
20:39:27  10  	  data_table_name => '&bldtable',
20:39:27  11  	  exclude_list	  => DBMS_DATA_MINING_TRANSFORM.COLUMN_LIST (&exclude1));
20:39:27  12  
20:39:27  13  	DBMS_DATA_MINING_TRANSFORM.INSERT_MISS_CAT_MODE (
20:39:27  14  	  miss_table_name => 'svmc_miss_cat',
20:39:27  15  	  data_table_name => '&bldtable',
20:39:27  16  	  exclude_list	  => DBMS_DATA_MINING_TRANSFORM.COLUMN_LIST (&exclude1));
20:39:27  17  
20:39:27  18  	-- xform input data to replace missing values
20:39:27  19  	DBMS_DATA_MINING_TRANSFORM.XFORM_MISS_NUM(
20:39:27  20  	  miss_table_name => 'svmc_miss_num',
20:39:27  21  	  data_table_name => '&bldtable',
20:39:27  22  	  xform_view_name => 'xformed_build_miss_num');
20:39:27  23  	DBMS_DATA_MINING_TRANSFORM.XFORM_MISS_CAT(
20:39:27  24  	  miss_table_name => 'svmc_miss_cat',
20:39:27  25  	  data_table_name => '&bldtable',
20:39:27  26  	  xform_view_name => 'xformed_build_miss_cat');
20:39:27  27  
20:39:27  28  	-- Perform outlier treatment.
20:39:27  29  	-- create clip table
20:39:27  30  	-- DBMS_DATA_MINING_TRANSFORM.CREATE_CLIP (clip_table_name => 'svmc_clip');
20:39:27  31  
20:39:27  32  	-- populate clip table
20:39:27  33  	DBMS_DATA_MINING_TRANSFORM.INSERT_CLIP_WINSOR_TAIL (
20:39:27  34  	  clip_table_name => 'svmc_clip',
20:39:27  35  	  data_table_name => '&bldtable',
20:39:27  36  	  tail_frac	  => 0.025,
20:39:27  37  	  exclude_list	  => DBMS_DATA_MINING_TRANSFORM.COLUMN_LIST (&exclude1));
20:39:27  38  
20:39:27  39  	-- xform input data to winsorized data
20:39:27  40  	DBMS_DATA_MINING_TRANSFORM.XFORM_CLIP(
20:39:27  41  	  clip_table_name => 'svmc_clip',
20:39:27  42  	  data_table_name => '&bldtable',
20:39:27  43  	  xform_view_name => 'svmc_winsor');
20:39:27  44  
20:39:27  45  	-- create normalization table
20:39:27  46  	-- DBMS_DATA_MINING_TRANSFORM.CREATE_NORM_LIN (norm_table_name => 'svmc_norm');
20:39:27  47  
20:39:27  48  	-- populate normalization table based on winsorized data
20:39:27  49  	DBMS_DATA_MINING_TRANSFORM.INSERT_NORM_LIN_MINMAX (
20:39:27  50  	  norm_table_name => 'svmc_norm',
20:39:27  51  	  data_table_name => 'svmc_winsor',
20:39:27  52  	  exclude_list	  => DBMS_DATA_MINING_TRANSFORM.COLUMN_LIST (&exclude1));
20:39:27  53  
20:39:27  54  	-- normalize the original data
20:39:27  55  	DBMS_DATA_MINING_TRANSFORM.XFORM_NORM_LIN (
20:39:27  56  	  norm_table_name => 'svmc_norm',
20:39:27  57  	  data_table_name => '&bldtable',
20:39:27  58  	  xform_view_name => 'svmc_build_prep');
20:39:27  59  END;
20:39:27  60  /
old  10:     data_table_name => '&bldtable',
new  10:     data_table_name => 'bme',
old  11:     exclude_list    => DBMS_DATA_MINING_TRANSFORM.COLUMN_LIST (&exclude1));
new  11:     exclude_list    => DBMS_DATA_MINING_TRANSFORM.COLUMN_LIST ('gatt','prdate'));
old  15:     data_table_name => '&bldtable',
new  15:     data_table_name => 'bme',
old  16:     exclude_list    => DBMS_DATA_MINING_TRANSFORM.COLUMN_LIST (&exclude1));
new  16:     exclude_list    => DBMS_DATA_MINING_TRANSFORM.COLUMN_LIST ('gatt','prdate'));
old  21:     data_table_name => '&bldtable',
new  21:     data_table_name => 'bme',
old  25:     data_table_name => '&bldtable',
new  25:     data_table_name => 'bme',
old  35:     data_table_name => '&bldtable',
new  35:     data_table_name => 'bme',
old  37:     exclude_list    => DBMS_DATA_MINING_TRANSFORM.COLUMN_LIST (&exclude1));
new  37:     exclude_list    => DBMS_DATA_MINING_TRANSFORM.COLUMN_LIST ('gatt','prdate'));
old  42:     data_table_name => '&bldtable',
new  42:     data_table_name => 'bme',
old  52:     exclude_list    => DBMS_DATA_MINING_TRANSFORM.COLUMN_LIST (&exclude1));
new  52:     exclude_list    => DBMS_DATA_MINING_TRANSFORM.COLUMN_LIST ('gatt','prdate'));
old  57:     data_table_name => '&bldtable',
new  57:     data_table_name => 'bme',
